webpackJsonp([45],{1079:function(e,t,n){"use strict";function o(e,t,n,o,r,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function a(e){o(c,r,i,a,u,"next",e)}function u(e){o(c,r,i,a,u,"throw",e)}var c=e.apply(t,n);a(void 0)})}}function i(){return a.apply(this,arguments)}function a(){return a=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.canShowPromo)()){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:return e.next=4,u.BeautifulEmailStore.instance().getSuggestedEmail();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",Promise.reject());case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}t.a=i;var u=n(409),c=(n.n(u),n(371));n.n(c)},1080:function(e,t,n){"use strict";e.exports={from:{month:12,day:15},to:{month:1,day:30}}},1595:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var o=n(5884),r=(n.n(o),n(495)),i=n.n(r),a=n(527),u=n(323),c=(n.n(u),n(5885)),s=(n.n(c),n(5888)),l=(n.n(s),n(418)),f=Object(u.compose)(Object(a.a)({sendMetric:!0,metricRoot:[l.OPT_IN_SUBSCRIPTIONS_METRIKA,"Promo"],offOnShow:!1}),i()(),Object(o.withPromoOptInSubscriptions)({metricRoot:[l.OPT_IN_SUBSCRIPTIONS_METRIKA,"Promo"],sendMetricOnActions:!0}))(s.OptInSubscriptionsTooltip),p=Object(o.withPromoOptInSubscriptions)({metricRoot:[l.OPT_IN_SUBSCRIPTIONS_METRIKA,"Promo Modal"]})(c.OptInSubscriptionsModal)},1596:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return u}));var o=n(401),r=(n.n(o),n(69)),i=(n.n(r),function(){return Object(r.hasFeature)(r.Features.OPT_IN_SUBSCRIPTIONS)&&!Daria.IS_CORP&&!Daria.Config.isWS&&"ru"===Daria.Config.TLD}),a=function(){return Object(r.hasFeature)(r.Features.OPT_IN_SUBSCRIPTIONS)&&ns.Model.get("settings").isSet(o.Settings.CAN_USE_OPT_IN_SUBSCRIPTIONS)},u=function(){return a()&&ns.Model.get("settings").isSet(o.Settings.OPT_IN_SUBSCRIPTIONS_ENABLED)}},1597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(69);n.n(o);t.default={name:"promo-disk-features",params:{ignorePromoDelay:!0,ignoreStartPromoDelay:!0,ignoreInboxMessages:!0,ignoreKCUFfilter:!0,showOnlyOnce:!0},check:function(){return!(Daria.Config.workspace||"messages"!==ns.page.current.page||!Object(o.hasFeature)(o.Features.WEB_PROMO_DISK)||"ru"!==Daria.Config.locale||Daria.CompactMode.isCompactHeader())},callback:function(){ns.View.create("promo-disk-tab").show({where:".mail-ui-Link-Disk>span",how:{at:"center bottom",my:"center top",collision:"none"}})}}},199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5865);n.n(o);Jane.module("promo.js",(function(){Daria.promo={},n(5866),n(5928),n(5929)}))},333:function(e,t,n){"use strict";var o=n(528),r=n(529),i=n(530),a=n(531),u=n(430),c=(n(532),n(533)),s=n(585),l=n(534),f=n(535),p=n(536),d=n(537),m=n(538);n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return m}))},373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeautifulEmailStatus=void 0;!(function(e){e.NotConnected="not-connected",e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e.Failed="failed",e.InfoUnavailable="info-unavailable"})(t.BeautifulEmailStatus||(t.BeautifulEmailStatus={}))},380:function(e,t,n){"use strict";function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}function r(e){return a.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),u)}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(321),u=(n.n(a),(function(e,t,n,o){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var u=new Array(a),c=0;c<a;c++)u[c]=arguments[c+3];t.children=u}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}})("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M1.793 1.793a1 1 0 000 1.414L6.586 8l-4.793 4.793a1 1 0 101.414 1.414L8 9.414l4.793 4.793a1 1 0 001.414-1.414L9.414 8l4.793-4.793a1 1 0 00-1.414-1.414L8 6.586 3.207 1.793a1 1 0 00-1.414 0z"}));t.default=r},386:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Promo=void 0;var a=i(n(980));t.Promo=a},389:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return d}));var o=n(330),r=n(321),i=n.n(r),a=n(361),u=(n.n(a),n(447)),c=n(454),s=n(566),l=n(567),f=n(462),p=(n.n(f),Object(a.cn)("Modal")),d=function(e){var t=e.children,n=e.className,a=e.contentVerticalAlign,f=void 0===a?"middle":a,d=e.hasAnimation,m=void 0===d||d,h=e.innerRef,b=e.keepMounted,y=e.onClose,O=e.preventBodyScroll,_=void 0===O||O,v=e.scope,g=e.visible,P=e.zIndex,E=e.trapFocus,S=void 0===E||E,w=e.autoFocus,C=void 0===w||w,j=e.restoreFocus,M=void 0===j||j,T=e.restoreFocusRef,k=Object(o.d)(e,["children","className","contentVerticalAlign","hasAnimation","innerRef","keepMounted","onClose","preventBodyScroll","scope","visible","zIndex","trapFocus","autoFocus","restoreFocus","restoreFocusRef"]),R=Object(r.useRef)(null);return Object(u.a)({enabled:_&&g}),Object(c.a)({enabled:S&&g,scopeRef:R,autoFocus:C,restoreFocus:M,restoreFocusRef:T}),Object(s.a)({visible:g,onClose:y,essentialRefs:[R],unsafe_strategy:"pressup"}),i.a.createElement(l.a,{scope:v,visible:g,keepMounted:b},i.a.createElement("div",Object(o.a)({},k,{ref:h,className:p({visible:g,hasAnimation:m},[n]),style:{zIndex:P}}),i.a.createElement("div",{className:p("Overlay")}),i.a.createElement("div",{className:p("Wrapper")},i.a.createElement("div",{className:p("Table")},i.a.createElement("div",{className:p("Cell",{align:f})},i.a.createElement("div",{ref:R,className:p("Content"),tabIndex:-1,role:"dialog","aria-modal":!0},t))))))};d.displayName=p()},390:function(e,t,n){"use strict";function o(e,t){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=e.style[o]);for(var o in t)t.hasOwnProperty(o)&&(e.style[o]=t[o]);return n}function r(e){var t=getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function i(e){for(;e&&!r(e);)e=e.parentElement;return e||document.documentElement}function a(){if("undefined"==typeof document)return 0;if(void 0===s){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.pointerEvents="none",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;n===o&&(o=t.clientWidth),document.body.removeChild(t),s=n-o}return s}function u(){var e=!1;if(!Object(l.a)())return!1;try{var t=function(){return null},n={get passive(){e=!0}};window.addEventListener("testPassive",t,n),window.removeEventListener("testPassive",t)}catch(e){}return e}function c(e){return e===document.body||e===document.documentElement}t.e=o,t.b=i,t.a=a,t.c=u,t.d=c;var s,l=n(357)},391:function(e,t,n){"use strict";function o(e,t){return!!h&&h.call(e,t)}function r(e){var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?"true"===e.contentEditable?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName&&"DETAILS"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t}function i(e){return"INPUT"===e.tagName}function a(e){return i(e)&&"hidden"===e.type}function u(e){return i(e)&&"radio"===e.type}function c(e){if("hidden"===window.getComputedStyle(e).visibility)return!0;for(var t=e;t;){if("none"===window.getComputedStyle(t).display)return!0;t=t.parentElement}return!1}function s(e){return e.checked?e:Object(d.a)(e.form||e.ownerDocument,(function(t){var n=t;return u(n)&&n.name===e.name&&n.checked&&n.form===e.form})).nextNode()}function l(e){if(!e.name)return!0;var t=s(e);return!t||t===e}function f(e){return!(!o(e,m)||u(e)&&!l(e)||a(e))&&(r(e)>=0&&!e.disabled&&!c(e))}function p(e,t){for(var n=Object(d.a)(e,(function(e){var n=f(e);return t?n&&t(e):n})),o=[],i=[],a=0;n.nextNode();){var u=n.currentNode;0===r(u)?i.push(u):o.push({index:a++,tabIndex:r(u),node:u})}return o.sort((function(e,t){return e.tabIndex===t.tabIndex?e.index-t.index:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(i)}t.a=p;var d=n(459),m=["input","select","textarea","button","a[href]","area[href]","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"].join(","),h=null;"undefined"!=typeof Element&&(h=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)},392:function(e,t,n){"use strict";function o(){if(null===_){_=!1;try{document.createElement("div").focus({get preventScroll(){return _=!0,!0}})}catch(e){}}return _}function r(e){for(var t=[],n=document.scrollingElement||document.documentElement,o=e.parentNode;o instanceof HTMLElement&&o!==n;)(o.offsetHeight<o.scrollHeight||o.offsetWidth<o.scrollWidth)&&t.push({element:o,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft}),o=o.parentNode;return n instanceof HTMLElement&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),t}function i(e){var t,n;try{for(var o=Object(b.f)(e),r=o.next();!r.done;r=o.next()){var i=r.value,a=i.element,u=i.scrollTop,c=i.scrollLeft;a.scrollTop=u,a.scrollLeft=c}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}function a(){return document.activeElement}function u(e,t){return e.contains(t)}function c(){return a()===document.body}function s(e){var t=document.createElement("span");return t.tabIndex=e,Object.assign(t.style,{width:"1px",height:0,padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"}),t.setAttribute("aria-hidden","true"),t.dataset[O]="true",t}function l(e){return Boolean(e.dataset[O])}function f(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){if(o())e.focus({preventScroll:!0});else{var t=r(e);e.focus(),i(t)}}function d(e,t){if(e)try{t?p(e):e.focus()}catch(e){}}function m(e){d(Object(b.c)(Object(y.a)(e,(function(e){return!l(e)})),1)[0])}function h(e,t,n){return-1===e?0:t>0?(t+e+n)%t:-1}t.d=a,t.f=u,t.g=c,t.a=s,t.h=l,t.i=f,t.b=d,t.c=m,t.e=h;var b=n(330),y=n(391),O="focusTrapGuard",_=null},402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var o=n(519);Object.defineProperty(t,"Modal",{enumerable:!0,get:function(){return o.Modal}})},404:function(e,t,n){"use strict";var o=n(539),r=n(540);n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}))},411:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return f}));var o=n(69),r=(n.n(o),n(404)),i=function(){return Object(o.hasFeature)(o.Features.WEB_COMPOSE_AUTOCOMPLETE)||Object(o.hasFeature)(o.Features.WEB_COMPOSE_AUTOCOMPLETE_DRY_RUN)},a=function(){return!Daria.isReactiveCompose()&&Object(o.hasFeature)(o.Features.WEB_COMPOSE_AUTOCOMPLETE)},u=function(){var e=c(),t=!ns.Model.get("settings").isSet(e);if(Daria.isReactiveCompose()){if(t)return r.a.REACT}else{if(Object(o.hasFeature)(o.Features.WEB_COMPOSE_AUTOCOMPLETE)&&t)return r.a.NOSCRIPT;if(Object(o.hasFeature)(o.Features.WEB_COMPOSE_AUTOCOMPLETE_DRY_RUN))return r.a.NOSCRIPT_DRY_RUN}return r.a.NONE},c=function(){return Daria.isReactiveCompose()?"disable_autocomplete_react":"disable_compose_autocomplete"},s=function(){var e=u();return Daria.isReactiveCompose()?e===r.a.REACT:!Daria.isReactiveCompose()&&Object(o.hasFeature)(o.Features.WEB_COMPOSE_AUTOCOMPLETE)?e===r.a.NOSCRIPT:null},l=function(){return Daria.isReactiveCompose()?Object(o.getFeatureParams)(o.Features.WEB_COMPOSE_AUTOCOMPLETE_REACT):Object(o.getFeatureParams)(o.Features.WEB_COMPOSE_AUTOCOMPLETE)||Object(o.getFeatureParams)(o.Features.WEB_COMPOSE_AUTOCOMPLETE_DRY_RUN)},f=function(){var e=Object(o.getFeatureParams)(o.Features.WEB_COMPOSE_AUTOCOMPLETE_REACT);return e&&e.type||r.b.POPUP}},425:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var a=i(n(321)),u=n(323),c=n(426),s=n(467),l=n(367),f=n(427),p=u.compose(c.withThemeNormal,f.withZIndex,s.withStaticTheme(l.MG_NEUTRAL_LIGHT))(c.Modal),d=function(e){var t=e.children,n=e.visible,i=r(e,["children","visible"]);return a.default.createElement(p,o({visible:n,preventBodyScroll:!1},i),t)};t.Modal=d},426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(389);n.d(t,"cnModal",(function(){return o.b})),n.d(t,"Modal",(function(){return o.a}));var r=n(463);n.d(t,"withThemeNormal",(function(){return r.a}))},427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(468);n.d(t,"withZIndex",(function(){return o.a}))},430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ATTACHMENTS_ERROR",(function(){return o})),n.d(t,"CAPTCHA",(function(){return r})),n.d(t,"CONFIRM_REMOVE",(function(){return i})),n.d(t,"CONTACTS_SUGGEST",(function(){return a})),n.d(t,"DISK_RESOURCES",(function(){return u})),n.d(t,"EMPTY_SUBJECT",(function(){return c})),n.d(t,"LIMITED_RECIPIENTS",(function(){return s})),n.d(t,"REMOVE_DRAFT",(function(){return l})),n.d(t,"SEND_FAILED",(function(){return f})),n.d(t,"SEND_RETRYABLE_FAILED",(function(){return p})),n.d(t,"VALIDATION_ERROR",(function(){return d}));var o="AttachmentsError",r="Captcha",i="ConfirmRemove",a="ContactsSuggest",u="DiskResources",c="EmptySubject",s="LimitedRecipients",l="RemoveDraft",f="SendFailed",p="SendRetryableFailed",d="ValidationError"},447:function(e,t,n){"use strict";var o=n(448);n.d(t,"a",(function(){return o.a}))},448:function(e,t,n){"use strict";function o(e){var t=e.enabled,n=e.containerRef,o=Object(r.useRef)(null),u=Object(r.useRef)(!1);Object(i.a)((function(){var e=n?n.current:null;o.current!==e&&(t&&u.current&&(a.b(o.current),a.a(e)),o.current=e)})),Object(i.a)((function(){if(t)return u.current=!0,a.a(o.current),function(){u.current=!1,a.b(o.current)}}),[t])}t.a=o;var r=n(321),i=(n.n(r),n(406)),a=n(449)},449:function(e,t,n){"use strict";var o=n(450);n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return o.b}))},450:function(e,t,n){"use strict";function o(e){return e||document.body}function r(e){if(Object(a.a)()){var t=o(e);c.a(t),Object(u.a)()&&s.a(t)}}function i(e){if(Object(a.a)()){var t=o(e);c.b(t),Object(u.a)()&&s.b(t)}}t.a=r,t.b=i;var a=n(357),u=n(451),c=n(452),s=n(453)},451:function(e,t,n){"use strict";function o(){return"undefined"!=typeof window&&window.navigator&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1)}t.a=o},452:function(e,t,n){"use strict";function o(e){return e[p]}function r(e,t){e[p]=t}function i(e){delete e[p]}function a(e){return/scroll/.test(getComputedStyle(e).overflowY)}function u(e){var t=Object(l.d)(e)&&window.innerWidth-document.documentElement.clientWidth>0,n=e.scrollHeight>e.clientHeight;return t||n||a(e)?Object(l.a)():0}function c(e){var t=o(e);if(t)return void t.count++;var n=u(e),i=parseInt(getComputedStyle(e).getPropertyValue("padding-right"),10);r(e,{initialStyle:Object(l.e)(e,{paddingRight:i+n+"px",overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}),count:1})}function s(e){var t=o(e);t&&0===--t.count&&(Object(l.e)(e,t.initialStyle),i(e))}t.a=c,t.b=s;var l=n(390),f=Math.random().toString(36).slice(2),p="__scrollLockState$"+f},453:function(e,t,n){"use strict";function o(e){if(1===e.changedTouches.length){if(l.scrollable=Object(c.b)(e.target),Object(c.d)(l.scrollable))return;l.lastY=e.changedTouches[0].pageY}}function r(e){var t=l.scrollable,n=l.lastY;if(!(e.changedTouches.length>1)){if(!t||Object(c.d)(t))return void e.preventDefault();var o=e.changedTouches[0].pageY,r=t.scrollTop,i=t.scrollHeight-t.clientHeight;(r<=0&&o>n||r>=i&&o<n)&&e.preventDefault(),l.lastY=o}}function i(){l.scrollable&&(l.scrollable=null)}function a(e){Object(c.d)(e)&&1===++l.count&&(l.scrollX=window.pageXOffset,l.scrollY=window.pageYOffset,document.addEventListener("touchstart",o,s),document.addEventListener("touchmove",r,s),document.addEventListener("touchend",i,s))}function u(e){Object(c.d)(e)&&0!==l.count&&0===--l.count&&(document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i),window.scrollTo(l.scrollX,l.scrollY))}t.a=a,t.b=u;var c=n(390),s=Object(c.c)()?{passive:!1}:void 0,l={count:0,lastY:0,scrollable:null,scrollX:0,scrollY:0}},454:function(e,t,n){"use strict";var o=n(455);n.d(t,"a",(function(){return o.a}))},455:function(e,t,n){"use strict";function o(e){var t=e.scopeRef,n=e.enabled,o=e.restoreFocusRef,c=e.restoreFocus,s=void 0===c||c,l=e.autoFocus,f=void 0===l||l,p=Object(r.useRef)(null),d=Object(r.useRef)(null),m=Object(r.useMemo)((function(){return{autoFocus:f}}),[f]);Object(r.useEffect)((function(){p.current&&p.current.setOptions(m)}),[m]),Object(a.a)((function(){d.current!==t.current&&(d.current=t.current,p.current&&(p.current.deactivate(),p.current=null),d.current&&(p.current=Object(i.a)(d.current,m),n&&p.current.activate()))})),Object(a.a)((function(){if(n&&p.current)return p.current.activate(),function(){p.current&&p.current.deactivate()}}),[n]),Object(u.a)({enabled:n&&s,restoreFocusRef:o})}t.a=o;var r=n(321),i=(n.n(r),n(456)),a=n(406),u=n(461)},456:function(e,t,n){"use strict";var o=n(457);n.d(t,"a",(function(){return o.a}))},457:function(e,t,n){"use strict";function o(e,t){void 0===t&&(t={});var n=r.a.getInstance();return new i.a(n,e,t)}t.a=o;var r=n(458),i=n(460)},458:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o,r=n(391),i=n(392);!(function(e){e[e.None=0]="None",e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(o||(o={}));var a=(function(){function e(){this.instances=[],this.direction=o.None,this.lastActiveElement=null,this.onDocumentFocusIn=this.onDocumentFocusIn.bind(this),this.onDocumentKeyDown=this.onDocumentKeyDown.bind(this),this.onMouseDown=this.onMouseDown.bind(this)}return e.getInstance=function(){return this.manager||(this.manager=new e),this.manager},e.prototype.activate=function(e){this.preventLastFocusIn(),0===this.instances.length&&this.attachEvents(),this.instances.push(e),this.autoFocus(e)},e.prototype.deactivate=function(e){this.preventLastFocusIn(),this.instances=this.instances.filter((function(t){return t!==e})),0===this.instances.length&&this.detachEvents()},e.prototype.autoFocus=function(e){var t=e.getScope(),n=e.getOptions().autoFocus,o=Object(i.d)();!n||o&&Object(i.f)(t,o)||(Object(i.c)(t),this.focusScope(t))},e.prototype.focusScope=function(e){var t=Object(i.d)();t&&Object(i.f)(e,t)||Object(i.b)(e,!0)},e.prototype.checkFocusInCurrentScope=function(){var e=this.instances[this.instances.length-1];e&&this.checkFocusIn(e)},e.prototype.preventLastFocusIn=function(){this.raf&&cancelAnimationFrame(this.raf)},e.prototype.checkFocusIn=function(e){var t=e.getScope(),n=this,a=n.direction,u=n.lastActiveElement,c=Object(i.d)();if(this.lastActiveElement=c,this.direction=o.None,c&&!Object(i.g)()&&!Object(i.f)(t,c)){var s=Object(r.a)(t,(function(e){return!Object(i.h)(e)})),l=s.indexOf(c);if(0===s.length)this.focusScope(t);else if(-1===l){var f=u?s.indexOf(u):-1,p=Object(i.e)(f,s.length,a);Object(i.b)(s[p])}}},e.prototype.attachEvents=function(){document.addEventListener("focusin",this.onDocumentFocusIn,!0),document.addEventListener("keydown",this.onDocumentKeyDown,!0),document.addEventListener("mousedown",this.onMouseDown,!0)},e.prototype.detachEvents=function(){document.removeEventListener("focusin",this.onDocumentFocusIn,!0),document.removeEventListener("keydown",this.onDocumentKeyDown,!0),document.removeEventListener("mousedown",this.onMouseDown,!0)},e.prototype.onDocumentFocusIn=function(){var e=this;this.raf=requestAnimationFrame((function(){e.checkFocusInCurrentScope()}))},e.prototype.onDocumentKeyDown=function(e){"Tab"!==e.key||e.altKey||e.ctrlKey||e.metaKey||(this.direction=e.shiftKey?o.Backward:o.Forward)},e.prototype.onMouseDown=function(){this.direction=o.None},e})()},459:function(e,t,n){"use strict";function o(e,t){var n=function(e){return t(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},o=n;return o.acceptNode=n,document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,o,!1)}t.a=o},460:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(330),r=n(392),i=(function(){function e(e,t,n){void 0===n&&(n={}),this.options={autoFocus:!0},this.active=!1,this.cleanupFns=[],this.manager=e,this.scope=t,this.setOptions(n)}return e.prototype.getScope=function(){return this.scope},e.prototype.activate=function(){this.active||(this.active=!0,this.attachGuards(),this.activateInManager())},e.prototype.deactivate=function(){this.active&&(this.active=!1,this.cleanupFns.forEach((function(e){return e()})),this.cleanupFns=[])},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(e){this.options=Object(o.a)(Object(o.a)({},this.options),e)},e.prototype.attachGuards=function(){var e=Object(r.a)(1),t=Object(r.a)(0);this.scope.insertAdjacentElement("beforebegin",e),this.scope.insertAdjacentElement("afterend",t),this.cleanupFns.push((function(){Object(r.i)(e),Object(r.i)(t)}))},e.prototype.activateInManager=function(){var e=this;this.manager.activate(this),this.cleanupFns.push((function(){e.manager.deactivate(e)}))},e})()},461:function(e,t,n){"use strict";function o(e){var t=e.enabled,n=e.restoreFocusRef,o=Object(r.useRef)(null),a=Object(r.useRef)(null);t&&!o.current&&(o.current=Object(i.a)()?document.activeElement:null),Object(r.useEffect)((function(){a.current=n?n.current:null})),Object(r.useEffect)((function(){if(t)return function(){var e=a.current||o.current;o.current=null,a.current=null,e&&e.focus&&document.body.contains(e)&&e!==document.activeElement&&e.focus()}}),[t])}t.a=o;var r=n(321),i=(n.n(r),n(357))},462:function(e,t){},463:function(e,t,n){"use strict";var o=n(464);n.d(t,"a",(function(){return o.a}));var r=n(466);n.n(r)},464:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(323),r=(n.n(o),n(389)),i=n(465),a=(n.n(i),Object(o.withBemMod)(Object(r.b)(),{theme:"normal"}))},465:function(e,t){},466:function(e,t){},468:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(330),r=n(321),i=n.n(r),a=n(469),u=n(398),c={},s={zIndexGroupLevel:0},l=function(e){var t;return t=(function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentZIndex=0,e.innerRef=Object(r.createRef)(),e}return Object(o.b)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.updateZIndexPosition()},n.prototype.componentDidUpdate=function(e){e.visible!==this.props.visible&&this.updateZIndexPosition()},n.prototype.componentWillUnmount=function(){0!==this.currentZIndex&&this.releaseZIndex(this.props.zIndexGroupLevel,this.currentZIndex)},n.prototype.render=function(){var t=this.props,n=(t.zIndexGroupLevel,Object(o.d)(t,["zIndexGroupLevel"]));return i.a.createElement(e,Object(o.a)({},n,{innerRef:Object(u.a)(this.innerRef,this.props.innerRef)}))},n.prototype.updateZIndexPosition=function(){var e=this;requestAnimationFrame((function(){var t=e.props,n=t.visible,o=t.zIndexGroupLevel;n&&0===e.currentZIndex?e.currentZIndex=e.captureZIndex(o):n||(e.currentZIndex=e.releaseZIndex(o,e.currentZIndex)),n&&(null!==e.innerRef.current?e.innerRef.current.style.zIndex=String(e.currentZIndex):e.updateZIndexPosition())}))},n.prototype.captureZIndex=function(e){var t=c[e];void 0===t&&(t=[1e3*(e+1)],c[e]=t);var n=t[t.length-1]+1;return t.push(n),n},n.prototype.releaseZIndex=function(e,t){var n=c[e];return void 0!==n&&n.length>1&&n.splice(n.indexOf(t),1),0},n})(r.PureComponent),t.displayName="withZIndex("+Object(a.a)(e)+")",t.defaultProps=s,t}},508:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return u}));var a=n(5920),u=(function(){function e(t){var n=this,r=t.name,i=t.settingName;o(this,e),this.params={ignorePromoDelay:!0,ignoreStartPromoDelay:!0,ignoreInboxMessages:!0},this.off=function(){ns.Model.get("settings").setSettingOn(n.settingName)},this.name=r,this.settingName=i||r,this.callback=this.callback.bind(this)}return i(e,[{key:"check",value:function(){return!(!Daria.isReactiveCompose()||!Daria.React.Compose)&&(!ns.Model.get("settings").getSign(this.settingName)&&Daria.React.Compose.isVisible())}},{key:"callback",value:function(e){Object(a.a)({name:this.name,off:this.off,data:e})}}]),e})()},519:function(e,t,n){"use strict";var o=this&&this.__extends||(function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}})(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var u=a(n(321)),c=a(n(326)),s=n(425),l=n(348),f=n(342),p=a(n(380)),d=a(n(520)),m=(function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.onModalClose=function(e,o){var r,i,a="esc"===o?t.CloseSource.KEYBOARD:t.CloseSource.OUTSIDE_CLICK;null===(i=(r=n.props).onClose)||void 0===i||i.call(r,e,a),n.logCloseMetric()},n.onCloseButtonClick=function(e){var o,r;null===(r=(o=n.props).onClose)||void 0===r||r.call(o,e,t.CloseSource.CLOSE_BUTTON),n.logCloseMetric()},n.onVisibilityChanged=function(e){var t,o;e&&(null===(o=(t=n.props).logMetric)||void 0===o||o.call(t,"show"))},n}return o(t,e),t.prototype.renderCloseButton=function(){var e=this.props.closeButton;return e?e({onClose:this.onCloseButtonClick}):u.default.createElement(l.Button,{className:d.default.closeButton,size:"s",view:"clear",onClick:this.onCloseButtonClick,icon:function(e){return u.default.createElement("span",{className:c.default(d.default.cross,e)},u.default.createElement(p.default,null))}})},t.prototype.render=function(){var e=this.props,n=e.onClose,o=e.children,a=(e.logMetric,e.closeButton,e.wrapperClassName),l=i(e,["onClose","children","logMetric","closeButton","wrapperClassName"]);return u.default.createElement(s.Modal,r({className:this.props.className,theme:"normal",onClose:this.onModalClose},l),u.default.createElement("article",{className:c.default(d.default.wrap,a,d.default[this.props.size||t.Size.M])},o,n&&u.default.createElement("span",{className:d.default.close},this.renderCloseButton())))},t.prototype.logCloseMetric=function(){var e,t;null===(t=(e=this.props).logMetric)||void 0===t||t.call(e,"close")},t.prototype.componentDidMount=function(){this.onVisibilityChanged(this.props.visible)},t.prototype.componentDidUpdate=function(e){this.props.visible!==e.visible&&this.onVisibilityChanged(this.props.visible)},t})(u.default.PureComponent);t.Modal=m,(function(e){!(function(e){e.KEYBOARD="keyboard",e.OUTSIDE_CLICK="outside-click",e.CLOSE_BUTTON="close-button"})(e.CloseSource||(e.CloseSource={}));!(function(e){e.M="sizeM",e.FULL="sizeFull"})(e.Size||(e.Size={}));var t=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return u.default.createElement(f.Text,r({},this.props,{className:c.default(d.default.title,this.props.className),as:"h1"}),this.props.children)},t.defaultProps={typography:"subheader-m",weight:"medium",align:"left"},t})(u.default.PureComponent);e.Title=t;var n=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return u.default.createElement("div",{className:c.default(d.default.content,this.props.className)},this.props.children)},t})(u.default.PureComponent);e.Content=n;var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return u.default.createElement("div",{className:c.default(d.default.footer,this.props.className)},this.props.children)},t})(u.default.PureComponent);e.Footer=a;var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){var e,n,o,r;null===(n=(e=t.props).onClick)||void 0===n||n.call(e),null===(r=(o=t.props).logMetric)||void 0===r||r.call(o,"action")},t}return o(t,e),t.prototype.render=function(){var e=this.props,t=(e.logMetric,i(e,["logMetric"]));return u.default.createElement("span",{className:d.default.button},u.default.createElement(l.Button,r({},t,{onClick:this.onClick})))},t.defaultProps={size:"m",view:"action"},t})(u.default.PureComponent);e.ActionButton=s;var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){var e,n,o,r;null===(n=(e=t.props).onClick)||void 0===n||n.call(e),null===(r=(o=t.props).logMetric)||void 0===r||r.call(o,"close")},t}return o(t,e),t.prototype.render=function(){var e=this.props,t=(e.logMetric,i(e,["logMetric"]));return u.default.createElement("span",{className:d.default.button},u.default.createElement(l.Button,r({},t,{onClick:this.onClick})))},t.defaultProps={size:"m",view:"default"},t})(u.default.PureComponent);e.CancelButton=p})(m=t.Modal||(t.Modal={})),t.Modal=m},520:function(e,t){e.exports={wrap:"Modal__wrap--161rz",sizeM:"Modal__sizeM--3NrwU",sizeFull:"Modal__sizeFull--3wpfD",title:"Modal__title--2C2rW",content:"Modal__content--3P9JL",footer:"Modal__footer--pWlYu",close:"Modal__close--uE33_",cross:"Modal__cross--1dG9z",button:"Modal__button--2Bp4a"}},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"NORMAL",(function(){return o})),n.d(t,"SMALL",(function(){return r})),n.d(t,"NONE",(function(){return i}));var o="normal",r="small",i="none"},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DELETE_BY_CUT",(function(){return o})),n.d(t,"DELETE_CONTENT_BACKWARD",(function(){return r})),n.d(t,"INSERT_FROM_PASTE",(function(){return i})),n.d(t,"INSERT_LINE_BREAK",(function(){return a})),n.d(t,"INSERT_TEXT",(function(){return u})),n.d(t,"INSERT_MULTIPLE",(function(){return c}));var o="deleteByCut",r="deleteContentBackward",i="insertFromPaste",a="insertLineBreak",u="insertText",c="insertMultiple"},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"COLLAPSE",(function(){return o})),n.d(t,"CLOSE",(function(){return r})),n.d(t,"DELETE",(function(){return i})),n.d(t,"SENT",(function(){return a}));var o="collapse",r="close",i="delete",a="sent"},531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MAX_SUGGEST_ITEMS_FOR_POPUP",(function(){return o}));var o=3},532:function(e,t,n){"use strict"},533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"NO_CHANGES",(function(){return o})),n.d(t,"DRAFT_SAVED",(function(){return r})),n.d(t,"DRAFT_REMOVED",(function(){return i})),n.d(t,"DRAFT_NOT_SAVED",(function(){return a}));var o="no changes",r="draft saved",i="draft removed",a="draft not saved"},534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AUTOCOMPLETE_PROMO_CLOSED",(function(){return o})),n.d(t,"BEAUTIFUL_EMAIL_PROMO_CLOSED",(function(){return r})),n.d(t,"SUGGEST_BEAUTIFUL_EMAIL_PROMO_CLOSED",(function(){return i})),n.d(t,"DISABLE_AUTOCOMPLETE_REACT",(function(){return a})),n.d(t,"EMPTY_SUBJECT_POPUP_DISABLED",(function(){return u})),n.d(t,"ENABLE_AUTOSAVE",(function(){return c})),n.d(t,"ENABLE_HOTKEYS",(function(){return s})),n.d(t,"FROM_NAME",(function(){return l})),n.d(t,"LAST_USED_COMPOSE_SIZE",(function(){return f})),n.d(t,"NS_COMPOSE_PROMO_CLOSED",(function(){return p})),n.d(t,"RECIPIENTS_DIFF_PROMO_CLOSED",(function(){return d})),n.d(t,"SIGNATURE_TOP",(function(){return m})),n.d(t,"SIZE_LAYOUT",(function(){return h})),n.d(t,"SIZE_LAYOUT_LEFT",(function(){return b})),n.d(t,"STORED_COMPOSE_STATES",(function(){return y})),n.d(t,"TIMELINE_EXPANDED",(function(){return O})),n.d(t,"TODO_ENABLED",(function(){return _})),n.d(t,"TWO_SIZES_HEADER_PROMO",(function(){return v})),n.d(t,"TO_BIGGER_SIZE_PROMO",(function(){return g})),n.d(t,"TO_SMALLER_SIZE_PROMO",(function(){return P}));var o="autocomplete_promo_close_react",r="beautiful_email_compose_promo",i="beautiful_email_compose_promo",a="disable_autocomplete_react",u="empty_subject_popup_disabled",c="enable_autosave",s="enable_hotkeys",l="from_name",f="last_used_compose_size",p="ns_compose_promo_closed",d="kukutz-promo-closed",m="signature_top",h="size-view-app",b="size-layout-left",y="storedComposeStates",O="timeline-is-open",_="show_todo",v="two_sizes_header_promo",g="two_sizes_header_promo_small",P="two_sizes_header_promo_large"},535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"INPUT",(function(){return o})),n.d(t,"POPUP",(function(){return r}));var o="line",r="popup"},536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"POPULAR",(function(){return o})),n.d(t,"QUERY",(function(){return r}));var o="popular",r="query"},537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TODAY",(function(){return o})),n.d(t,"TOMORROW",(function(){return r})),n.d(t,"WEEKEND",(function(){return i})),n.d(t,"NEXT_WEEK",(function(){return a}));var o="today",r="tomorrow",i="weekend",a="next week"},538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FOREGROUND",(function(){return o})),n.d(t,"BACKGROUND",(function(){return r}));var o="foreground",r="background"},539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"NOSCRIPT",(function(){return o})),n.d(t,"NOSCRIPT_DRY_RUN",(function(){return r})),n.d(t,"NONE",(function(){return i})),n.d(t,"REACT",(function(){return a}));var o="noscript",r="noscript-dry-run",i="none",a="react"},540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"POPUP",(function(){return o})),n.d(t,"INLINE",(function(){return r}));var o="popup",r="inline"},5865:function(e,t){},5866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(5867),n(1597)},5867:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(5868),i=n(31),a=n(5869),u=n(613);Object(r.a)("hasInboxMessages",Daria.messages.everHadMessages),Jane.Promo={_queue:[],_promos:a.a,_nameOfShownPromo:"",availablePages:{messages:!1,message:!1},run:function(e){i.a.log("promo: manager run from",e),this._queue=_.clone(this._promos),this._run()},_run:function(){var e=this,t=this.findPromo(Daria.urlParams.promo);if(t)return void this._invokeCallbackAndSetSettings(t);if(!this._isPromoSelected()&&!this._haveAllAvailablePagesBeenChecked())for(var n=!1;this._queue[0]&&!n;){var o=this._queue[0];this.shownSetting=Object(u.b)(o.name);var r=this._shouldInvokePromoCallback(o);if(!0===r)return void this._invokeCallbackAndSetSettings(o);if(r&&_.isFunction(r.then))return void r.then(function(t){return function(){n=!0,e._invokeCallbackAndSetSettings(t)}}(o),this._processNextPromo.bind(this));this._queue.shift()}},findPromo:function(e){return e?_.find(this._promos,{name:e})||null:null},getCurrentPromo:function(){return this.findPromo(this._nameOfShownPromo)},showPromo:function(e){var t=this.findPromo(e);t&&this._invokeCallbackAndSetSettings(t)},turnOffPromo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t?ns.Model.get("settings").setSettingOn(Object(u.b)(e)):ns.Model.get("settings").setSettings(o({},Object(u.b)(e),t))},isPromoVisible:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){var t=Jane.Promo.findPromo(e);return t&&"function"==typeof t.isVisible&&t.isVisible()}))},_invokeCallbackAndSetSettings:function(e){this._nameOfShownPromo=e.name,i.a.log("promo: selected promo",e.name);try{e.callback(),this._setSettingsAfterSuccessRun(e)}catch(t){Jane.ErrorLog.sendException("promo-error."+e.name,t)}},_setSettingsAfterSuccessRun:function(e){var t=e.params,n=ns.Model.get("settings");t.showOnlyOnce&&n.setSettingOn(this.shownSetting),t.notAffectPromoDelay||n.updateSetting("promo-manager",{"last-time-show-promo":Daria.now(),"last-promo-was-name":e.name})},_processNextPromo:function(){this._queue.shift(),this._run()},_shouldInvokePromoCallback:function(e){var t=ns.Model.get("settings"),n=e.params,o=this._checkCommonPromoRules(e),r=n.ignoreStartPromoDelay||Daria.getAccountAgeInDays()>10,i=Object(u.c)(t.getSetting(this.shownSetting)),a=t.getSetting("promo-manager","json")||{},c=Number(a["last-time-show-promo"]||0),s=a["last-promo-was-name"]||"",l=Daria.now()-c>Jane.Date.WEEK;return(n.ignorePromoDelay||s===e.name)&&(l=!0),o&&l&&r&&i&&e.check()},_checkCommonPromoRules:function(e){var t=e.params;return(t.ignoreInboxMessages||Object(r.b)("hasInboxMessages"))&&(t.ignoreShowPromoSetting||!ns.Model.get("settings").getSetting("disable_promo"))&&(t.ignoreKCUFfilter||!Daria.IS_KCUF)&&(t.ignoreCORPfilter||!Daria.IS_CORP)&&this._isAvailablePage(ns.page.current.page)},_isPromoSelected:function(){return Boolean(this._nameOfShownPromo)},_isAvailablePage:function(e){var t=e in this.availablePages;return t&&(this.availablePages[e]=!0),t},_haveAllAvailablePagesBeenChecked:function(){var e=this;return Object.keys(this.availablePages).every((function(t){return e.availablePages[t]}))}}},5868:function(e,t,n){"use strict";function o(e){return i[e]="function"==typeof i[e]?i[e](window):i[e],i[e]}function r(e,t){void 0===i[e]&&(i[e]=t)}t.b=o,t.a=r;var i={}},5869:function(e,t,n){"use strict";t.a=_.map([n(5870),n(5878),n(5883),n(5889),n(5890),n(5893),n(5896),n(5900),n(5904),n(5907),n(934),n(717),n(5910),n(5911),n(5914),n(5915),n(1597),n(5917),n(5918),n(5919),n(5921),n(5922),n(5923),n(5924),n(5925),n(5926),n(5927)],"default")},5870:function(e,t,n){"use strict";function o(e,t){return a(e)||i(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return n}}function a(e){if(Array.isArray(e))return e}function u(e,t,n,o,r,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(o,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){function i(e){u(c,o,r,i,a,"next",e)}function a(e){u(c,o,r,i,a,"throw",e)}var c=e.apply(t,n);i(void 0)})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoOnboardingBeautifulEmail",(function(){return O}));var p=n(69),d=(n.n(p),n(5871)),m=n(1079),h=n(681),b=n(341),y=n(410),O=(function(){function e(){var t=this;s(this,e),this.name="promo-onboard-email",this.params={showOnlyOnce:!0,ignoreInboxMessages:!0,ignoreStartPromoDelay:!0},this.suggestedEmail="",this.callback=function(){Object(y.a)({name:t.name,Component:d.a,props:{email:t.suggestedEmail,avatar:t.avatar}})},this.off=function(){Jane.Promo.turnOffPromo(t.name)}}return f(e,[{key:"check",value:(function(){function e(){return t.apply(this,arguments)}var t=c(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.hasFeature)(p.Features.WEB_PROMO_ONBOARDING_BEAUTIFUL_EMAIL)){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:return t=Object(b.getSettingsStore)().getSettingValue("default_email"),n=Object(b.getSettingsStore)().getSettingValue("from_name"),e.next=6,Object(h.b)([{name:n,email:t}]);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=[];case 9:if(r=e.t0,i=o(r,1),a=i[0]){e.next=14;break}return e.abrupt("return",Promise.reject());case 14:return this.avatar=a.avatar,e.next=17,Object(m.a)();case 17:if(this.suggestedEmail=e.sent,this.suggestedEmail){e.next=20;break}return e.abrupt("return",Promise.reject());case 20:case"end":return e.stop()}}),e,this)})));return e})()}]),e})();t.default=new O},5871:function(e,t,n){"use strict";var o=n(5872);n.n(o);n.o(o,"PromoOnboardingBeautifulEmail")&&n.d(t,"a",(function(){return o.PromoOnboardingBeautifulEmail}))},5872:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromoOnboardingBeautifulEmail=void 0;var u=i(n(321)),c=a(n(326)),s=a(n(325)),l=n(418),f=n(329),p=n(348),d=n(402),m=a(n(380)),h=a(n(5873)),b=n(5874),y=function(e){var t=e.email,n=e.avatar,o=e.off,r=e.dispose,i=u.useCallback((function(){o(),r()}),[o,r]),a=u.useCallback((function(e){f.logMetric([l.ONBOARDING_BEAUTIFUL_EMAIL_METRIKA,e,f.hasProSubscription()?"paid user":"free user"])}),[]),y=u.useCallback((function(e){var t=e.onClose;return u.default.createElement(p.Button,{className:h.default.closeButton,size:"s",view:"raised",pin:"circle-circle",tabIndex:3,onClick:t,icon:function(e){return u.default.createElement("span",{className:c.default(h.default.cross,e)},u.default.createElement(m.default,null))}})}),[]);return u.default.createElement(d.Modal,{visible:!0,className:h.default.modal,wrapperClassName:h.default.modalWrapper,onClose:i,closeButton:y,logMetric:a},u.default.createElement(d.Modal.Content,{className:h.default.modalContent},u.default.createElement(b.Example,{suggestedEmail:t,avatar:n})),u.default.createElement(d.Modal.Title,{className:h.default.modalTitle,align:"center",typography:"subheader-xl",weight:"bold"},u.default.createElement(s.default,{loc:"promo-react/OnboardingBeautifulEmail_ModalTitle"})),u.default.createElement(d.Modal.Footer,{className:h.default.footer},u.default.createElement(d.Modal.CancelButton,{key:"cancel",view:"pseudo",size:"l",tabIndex:2,className:h.default.actionButton,onClick:i,logMetric:a},u.default.createElement(s.default,{loc:"promo-react/OnboardingBeautifulEmail_ModalCancel"})),u.default.createElement(d.Modal.ActionButton,{key:"action",size:"l",tabIndex:1,className:h.default.actionButton,url:"#setup/beautiful-email",type:"link",onClick:i,logMetric:a},u.default.createElement(s.default,{loc:"promo-react/OnboardingBeautifulEmail_ModalAction"}))))};t.PromoOnboardingBeautifulEmail=y},5873:function(e,t){e.exports={modal:"PromoOnboardingBeautifulEmail__modal--ZQaEi",modalWrapper:"PromoOnboardingBeautifulEmail__modalWrapper--1ZHrq",modalTitle:"PromoOnboardingBeautifulEmail__modalTitle--2BuBn",modalContent:"PromoOnboardingBeautifulEmail__modalContent--l-6S4",cross:"PromoOnboardingBeautifulEmail__cross--32Xpv",footer:"PromoOnboardingBeautifulEmail__footer--1pUEW",actionButton:"PromoOnboardingBeautifulEmail__actionButton--2fgVC"}},5874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarType=t.Example=void 0;var o=n(5875);Object.defineProperty(t,"Example",{enumerable:!0,get:function(){return o.Example}}),Object.defineProperty(t,"AvatarType",{enumerable:!0,get:function(){return o.AvatarType}})},5875:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Example=void 0;var i=r(n(321)),a=r(n(326)),u=r(n(325)),c=r(n(634)),s=r(n(5876)),l=r(n(5877)),f=function(e){var t,n,r=e.suggestedEmail,f=e.avatar;return i.default.createElement("div",{className:l.default.example},i.default.createElement("div",{className:l.default.content},i.default.createElement("div",{className:l.default.infoBlock},i.default.createElement("div",{className:l.default.infoBlockItem},i.default.createElement("div",{className:l.default.key},i.default.createElement(u.default,{loc:"promo-react/OnboardingBeautifulEmail_From"})),i.default.createElement("div",{className:l.default.value},i.default.createElement(c.default,o({className:l.default.avatar,size:"s"},f)),i.default.createElement("span",{className:a.default(l.default.ellipsisText,l.default.email,(t={},t[l.default.large]=r.length>19,t),(n={},n[l.default.extraLarge]=r.length>27,n))},r))),i.default.createElement("div",{className:l.default.infoBlockItem},i.default.createElement("div",{className:l.default.key},i.default.createElement(u.default,{loc:"promo-react/OnboardingBeautifulEmail_Subject"})),i.default.createElement("div",{className:a.default(l.default.value,l.default.withTransparency)},i.default.createElement(u.default,{className:l.default.ellipsisText,loc:"promo-react/OnboardingBeautifulEmail_SubjectValue"})))),i.default.createElement("p",{className:l.default.notice},i.default.createElement(u.default,{loc:"promo-react/OnboardingBeautifulEmail_DelightFirstPart"}),i.default.createElement("img",{src:s.default,className:l.default.fireIcon}),i.default.createElement("br",null),i.default.createElement(u.default,{loc:"promo-react/OnboardingBeautifulEmail_DelightSecondPart"}))))};t.Example=f},5876:function(e,t,n){e.exports=n.p+"_/cafc65409202131034a6c5ed2c06cd26-fire.png"},5877:function(e,t){e.exports={example:"Example__example--IPmMw",content:"Example__content--3SfG9",infoBlockItem:"Example__infoBlockItem--2ii2E",key:"Example__key--2HBdp",value:"Example__value--10W0Q",withTransparency:"Example__withTransparency--3ttWo",email:"Example__email--3pTvN",large:"Example__large--32A3k",extraLarge:"Example__extraLarge--3s9m-",notice:"Example__notice--16TgZ",avatar:"Example__avatar--1E0yh",ellipsisText:"Example__ellipsisText--2XS3b",fireIcon:"Example__fireIcon--1lPKa"}},5878:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoBackupPopup",(function(){return h}));var i=n(410),a=n(5879),u=(n.n(a),n(135)),c=(n.n(u),n(329)),s=n(479),l=n(512),f=(n.n(l),n(69)),p=(n.n(f),n(613)),d=n(521),m=(n.n(d),n(341)),h=function e(){var t,n=this;r(this,e),this.PROMO_SHOW_DELAY=l.WEEK,this.name="promo-backup-popup",this.promoMods={trash:"TRASH_PAGE",search:"SEARCH_PAGE"},this.currentPromoMod=this.promoMods.trash,this.params={ignorePromoDelay:!0,notAffectPromoDelay:!0},this.promoLocales=(t={},o(t,this.promoMods.search,{text:"promo-react/backup-search-page-popup-text",action:"promo-react/backup-search-page-popup-action"}),o(t,this.promoMods.trash,{text:"promo-react/backup-trash-page-popup-text",action:"promo-react/backup-trash-page-popup-action"}),t),this.check=function(){return!!Object(f.hasFeature)(f.Features.WEB_BACKUP_PROMO_POPUP)&&(!!n._isPromoAvailable()&&(n._isTrashPage()&&!Object(m.getSettingsStore)().isHiddenTrashEnabled?(n.currentPromoMod=n.promoMods.trash,!0):!(!n._isSearchPage()||null!==d.BackupStore.instance().lastValidBackupDate)&&(n.currentPromoMod=n.promoMods.search,!0)))},this.callback=function(){var e={promoType:n.currentPromoMod,locales:n.promoLocales[n.currentPromoMod],metricaRoot:n.currentPromoMod===n.promoMods.search?"Promo Backup Search":"Promo Backup Trash",canUseBackup:Object(s.canUseBackup)(),hasProSubscription:Object(c.hasProSubscription)()},t=function(){var t=Object(i.a)({name:n.name,Component:a.PromoBackupPopup,props:e});t&&(n._offPromoOnBadPages=n._offPromoOnBadPages.bind(n,t.dispose),ns.events.on("ns-page-after-load",n._offPromoOnBadPages),n._setPromoTimer())};setTimeout(t,2e3)},this.off=function(){ns.events.off("ns-page-after-load",n._offPromoOnBadPages)},this._setPromoTimer=function(){Jane.Promo.turnOffPromo(n.name,Daria.promoNow())},this._offPromoOnBadPages=function(e){!n._isSearchPage()&&!n._isTrashPage()&&(e(),n.off())},this._isTrashPage=function(){var e=ns.page.current.params,t=ns.Model.get("folders").getFolderById(e.current_folder)||{};return t&&t.symbol===u.WellKnownFolderSymbol.TRASH},this._isSearchPage=function(){var e=ns.page.current.params;return e&&"search"===e.search},this._isPromoAvailable=function(){var e=ns.Model.get("settings"),t=parseInt(e.getSetting(Object(p.b)(n.name)));return!(t&&!Number.isNaN(t))||Daria.promoNow()-Number(t)>=n.PROMO_SHOW_DELAY}};t.default=new h},5879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromoBackupPopup=void 0;var o=n(5880);Object.defineProperty(t,"PromoBackupPopup",{enumerable:!0,get:function(){return o.PromoBackupPopup}})},5880:function(e,t,n){"use strict";var o=this&&this.__extends||(function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}})(),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromoBackupPopup=void 0;var i=r(n(321)),a=n(930),u=n(348),c=n(342),s=r(n(325)),l=n(329),f=r(n(380)),p=r(n(5881)),d=r(n(5882)),m=(function(e){function t(t){var n=e.call(this,t)||this;return n._logMetric=function(e){var t=n.props,o=t.canUseBackup,r=t.hasProSubscription,i=t.metricaRoot,a=o?"premium user":r?"paid user":"free user";l.logMetric([i,e,a])},n._onOutsideClick=function(){n._logMetric("close on outside click"),n._close()},n._onClose=n._onClose.bind(n),n._onAction=n._onAction.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){this._logMetric("show")},t.prototype._onClose=function(){this._logMetric("cancel"),this._close()},t.prototype._onAction=function(){this._logMetric("action"),this._close()},t.prototype._close=function(){var e=this.props,t=e.off,n=e.dispose;t(),n()},t.prototype.render=function(){var e=this.props.locales;return i.default.createElement(a.InvertedContentColorPopup,{visible:!0,view:"default",className:d.default.promoBackupPopup,onClose:this._onOutsideClick},i.default.createElement("img",{className:d.default.mailIcon,src:p.default}),i.default.createElement(c.Text,{className:d.default.text,typography:"body-short-m",weight:"medium"},i.default.createElement(s.default,{loc:e.text})),i.default.createElement(u.Button,{size:"s",view:"default",onClick:this._onAction,url:l.getLinkToMailBackup(),target:"_blank",rel:"noopener noreferrer",type:"link",className:d.default.actionButton},i.default.createElement(s.default,{loc:e.action})),i.default.createElement(f.default,{width:"12px",height:"12px",className:d.default.closeIcon,onClick:this._onClose}))},t})(i.default.PureComponent);t.PromoBackupPopup=m},5881:function(e,t,n){e.exports=n.p+"_/d8ceff909107b511d3033e8ae0f394c3-MailIcon.png"},5882:function(e,t){e.exports={promoBackupPopup:"PromoBackupPopup__promoBackupPopup--1daay",popupVisible:"PromoBackupPopup__popupVisible--RcS9T",mailIcon:"PromoBackupPopup__mailIcon--3WdYd",closeIcon:"PromoBackupPopup__closeIcon--3fK2b",text:"PromoBackupPopup__text--2LFbI"}},5883:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoOptInSubscriptionsModal",(function(){return f}));var r=n(1595),i=n(410),a=n(1596),u=n(329),c=n(613),s=n(512),l=(n.n(s),n(69)),f=(n.n(l),function e(){var t=this;o(this,e),this.PROMO_SHOW_INTERVAL=s.MONTH,this.name="promo-opt-in-modal",this.params={},this.check=function(){return Object(a.b)()&&!Object(a.c)()&&t._isDelayExpired()},this.callback=function(){var e=Object(l.getFeatureParams)(l.Features.OPT_IN_SUBSCRIPTIONS),n=e.modalType;setTimeout((function(){Object(i.a)({name:t.name,Component:r.a,props:{modalType:n,hasProSubscription:Object(u.hasProSubscription)()}})}),2e3),Jane.Promo.turnOffPromo(t.name,Daria.promoNow())},this.off=function(){},this._isDelayExpired=function(){var e=ns.Model.get("settings"),n=Object(c.b)(t.name),o=parseInt(e.getSetting(n));if(o&&!Number.isNaN(o)){return Daria.promoNow()-o>=t.PROMO_SHOW_INTERVAL}return!0}});t.default=new f},5884:function(e,t,n){"use strict";var o=this&&this.__extends||(function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}})(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withPromoOptInSubscriptions=void 0;var c=u(n(321)),s=n(329),l=function(e){return function(t){return (function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.logMetric=function(n){var o=t.props,r=o.canUseOptIn,i=o.hasProSubscription,u=r?"premium user":i?"paid user":"free user";s.logMetric(a(e.metricRoot,[n,u]))},t.onCancel=function(){t.close(),e.sendMetricOnActions&&t.logMetric("cancel")},t.onAction=function(n){null===n||void 0===n||n.preventDefault(),s.emitUnsubscribePopupShow({page:"pending"}),t.close(),e.sendMetricOnActions&&t.logMetric("action")},t}return o(i,n),i.prototype.close=function(){var e=this.props,t=e.off,n=e.dispose;t(),n()},i.prototype.render=function(){return c.default.createElement(t,r({},this.props,{onCancel:this.onCancel,onAction:this.onAction,logMetric:this.logMetric}))},i})(c.default.Component)}};t.withPromoOptInSubscriptions=l},5885:function(e,t,n){"use strict";var o=this&&this.__extends||(function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}})(),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OptInSubscriptionsModal=void 0;var i=r(n(321)),a=n(348),u=r(n(5886)),c=r(n(326)),s=r(n(380)),l=n(402),f=n(342),p=n(5887),d=r(n(325)),m=p.PromoOptInSubscriptions.ModalType,h=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCloseButton=function(e){var t=e.onClose;return i.default.createElement(a.Button,{className:u.default.closeButton,size:"s",view:"raised",pin:"circle-circle",tabIndex:3,onClick:t,icon:function(e){return i.default.createElement("span",{className:c.default(u.default.cross,e)},i.default.createElement(s.default,null))}})},t.prototype.renderActionButtons=function(){var e=[i.default.createElement(l.Modal.CancelButton,{key:"cancel",view:"pseudo",size:"l",tabIndex:2,className:u.default.actionButton,onClick:this.props.onCancel,logMetric:this.props.logMetric},i.default.createElement(d.default,{loc:"promo-react/OptIn_ModalCancel"})),i.default.createElement(l.Modal.ActionButton,{key:"action",size:"l",tabIndex:1,className:u.default.actionButton,onClick:this.props.onAction,logMetric:this.props.logMetric},i.default.createElement(d.default,{loc:"promo-react/OptIn_ModalAction"}))];return this.props.modalType===m.compact&&e.reverse(),e},t.prototype.render=function(){var e,t=this.props.modalType===m.compact,n=this.props.hasProSubscription?"promo-react/OptIn_ModalDescription_PaidUser":"promo-react/OptIn_ModalDescription_FreeUser";return i.default.createElement(l.Modal,{visible:!0,className:c.default(u.default.modal,(e={},e[u.default.compact]=t,e)),wrapperClassName:u.default.modalWrapper,onClose:this.props.onCancel,logMetric:this.props.logMetric,closeButton:this.renderCloseButton},i.default.createElement(l.Modal.Title,{className:u.default.modalTitle,align:t?"right":"center",typography:"subheader-xl",weight:"bold"},i.default.createElement(d.default,{loc:"promo-react/OptIn_ModalTitle"})),i.default.createElement(l.Modal.Content,{className:u.default.modalContent},i.default.createElement(f.Text,{className:u.default.footer,align:t?"right":"center",typography:t?"body-long-l":"body-long-xl",as:"div",color:"primary",weight:"regular"},i.default.createElement(d.default,{loc:n}))),i.default.createElement(l.Modal.Footer,{className:u.default.footer},this.renderActionButtons()))},t.defaultProps={modalType:m.normal},t})(i.default.PureComponent);t.OptInSubscriptionsModal=h},5886:function(e,t){e.exports={modal:"PromoOptInSubscriptions__modal--3uKan",modalWrapper:"PromoOptInSubscriptions__modalWrapper--un3y2",modalTitle:"PromoOptInSubscriptions__modalTitle--1iJ2K",compact:"PromoOptInSubscriptions__compact--2XQOl",closeButton:"PromoOptInSubscriptions__closeButton--DodjN",actionButton:"PromoOptInSubscriptions__actionButton--3KZdN",footer:"PromoOptInSubscriptions__footer--2Ooc-",modalContent:"PromoOptInSubscriptions__modalContent--228rg",cross:"PromoOptInSubscriptions__cross--2jXfd"}},5887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromoOptInSubscriptions=void 0;!(function(e){!(function(e){e.normal="normal",e.compact="compact"})(e.ModalType||(e.ModalType={}))})(t.PromoOptInSubscriptions||(t.PromoOptInSubscriptions={}))},5888:function(e,t,n){"use strict";var o=this&&this.__extends||(function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}})(),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OptInSubscriptionsTooltip=void 0;var i=r(n(321)),a=r(n(336)),u=r(n(325)),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.anchor,n=e.canShowHeaderPromo,o=e.tone,r=e.popupRef,c=e.tooltipClass,s=e.canUseOptIn,l=e.onCancel,f=e.onAction,p=s?"promo-react/opt-in-subs-description-on":"promo-react/opt-in-subs-description",d=s?"promo-react/opt-in-subs-action-on":"promo-react/opt-in-subs-action";return i.default.createElement(a.default,{anchor:t,cls:c,size:"m",theme:"promo",to:["bottom-center","bottom-right"],tone:o,visible:n,popupProps:{ref:r}},i.default.createElement(a.default.Description,null,i.default.createElement("b",null,i.default.createElement(u.default,{loc:"promo-react/opt-in-subs-title"})),i.default.createElement("p",null,i.default.createElement(u.default,{loc:p}))),i.default.createElement(a.default.Buttons,{key:"buttons"},i.default.createElement(a.default.Buttons.Clear,{onClick:l},i.default.createElement(u.default,{loc:"promo-react/opt-in-subs-cancel"})),i.default.createElement(a.default.Buttons.Action,{onClick:f,type:"link",url:"#"},i.default.createElement(u.default,{loc:d}))))},t})(i.default.PureComponent);t.OptInSubscriptionsTooltip=c},5889:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoOptInSubscriptions",(function(){return c}));var r=n(1595),i=n(410),a=n(1596),u=n(329),c=function e(){var t=this;o(this,e),this.name="promo-opt-in-subs",this.params={},this.check=function(){return Object(a.b)()},this.callback=function(){var e=document.querySelector(".mail-SettingsButton");Object(i.a)({name:t.name,anchor:e,Component:r.b,props:{canUseOptIn:Object(a.a)(),hasProSubscription:Object(u.hasProSubscription)()}})},this.off=function(){Jane.Promo.turnOffPromo(t.name)}};t.default=new c},5890:function(e,t,n){"use strict";function o(e,t,n,o,r,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function a(e){o(c,r,i,a,u,"next",e)}function u(e){o(c,r,i,a,u,"throw",e)}var c=e.apply(t,n);a(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoBeautifulEmail",(function(){return p}));var c=n(5891),s=n(1079),l=n(371),f=(n.n(l),n(410)),p=(function(){function e(){i(this,e),this.name="promo-beautiful-email",this.params={},this.suggestedEmail=""}return u(e,[{key:"check",value:(function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)();case 2:if(this.suggestedEmail=e.sent,this.suggestedEmail){e.next=5;break}return e.abrupt("return",Promise.reject());case 5:case"end":return e.stop()}}),e,this)})));return e})()},{key:"callback",value:function(){var e=document.querySelector(".mail-SettingsButton");Object(f.a)({name:this.name,anchor:e,Component:c.a,props:{email:this.suggestedEmail,isPremium:Object(l.hasSubscriptionWithDomain)()}})}},{key:"off",value:function(){Jane.Promo.turnOffPromo(this.name)}}]),e})();t.default=new p},5891:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(5892),r=n(495),i=n.n(r),a=n(527),u=n(323),c=(n.n(u),Object(u.compose)(Object(a.a)({metricRoot:o.a.METRIC_ROOT,offOnShow:!1}),i()())(o.a))},5892:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){d||(d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:d,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return C}));var d,m=n(321),h=n.n(m),b=n(322),y=n.n(b),O=n(352),_=n.n(O),v=n(359),g=n(325),P=n(329),E=function(){return _()()("PromoBeautifulEmail")},S=p(g.default,{loc:"promo-react/beautiful-email-promo1-cancel"}),w=p(g.default,{loc:"promo-react/beautiful-email-promo1-action"}),C=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=s(t)).call.apply(e,[this].concat(i))),n._logMetric=function(e){Object(P.logMetric)([t.METRIC_ROOT,n.props.isPremium?"premium user":"free user",e])},n._onCancel=function(){n._close(),n._logMetric("cancel")},n._onAction=function(){n._close(),n._logMetric("action")},n}return l(t,e),a(t,[{key:"_close",value:function(){var e=this.props,t=e.off,n=e.dispose;t(),n()}},{key:"componentDidMount",value:function(){this.props.canShowHeaderPromo&&this._logMetric("show")}},{key:"componentDidUpdate",value:function(e){this.props.canShowHeaderPromo&&!e.canShowHeaderPromo&&this._logMetric("show")}},{key:"render",value:function(){var e=this.props,t=e.anchor,n=e.canShowHeaderPromo,o=e.tone,r=e.popupRef,i=e.tooltipClass,a=e.email,u=e.isPremium,c=u?"promo-react/beautiful-email-promo1-description-premium-user":"promo-react/beautiful-email-promo1-description-free-user";return p(v.i,{anchor:t,cls:E().mix(i).toString(),size:"m",theme:"promo",to:["bottom-center","bottom-right"],tone:o,visible:n,popupProps:{ref:r}},void 0,p(v.i.Description,{},void 0,p(g.default,{loc:c},void 0,p("span",{"data-ref":"email"},void 0,a))),p(v.i.Buttons,{},"buttons",p(v.i.Buttons.Clear,{onClick:this._onCancel},void 0,S),p(v.i.Buttons.Action,{onClick:this._onAction,type:"link",url:"#setup/beautiful-email"},void 0,w)))}}]),t})(h.a.PureComponent);C.propTypes={anchor:y.a.object,canShowHeaderPromo:y.a.bool,dispose:y.a.func.isRequired,popupRef:y.a.object,off:y.a.func.isRequired,tone:y.a.string,tooltipClass:y.a.string,email:y.a.string.isRequired,isPremium:y.a.bool.isRequired},C.METRIC_ROOT="Promo Beautiful Email"},5893:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoBackup",(function(){return c}));var r=n(5894),i=n(410),a=n(479),u=n(329),c=function e(){var t=this;o(this,e),this.name="promo-backup",this.params={},this.check=function(){return Object(a.isBackupVisible)()},this.callback=function(){var e=document.querySelector(".mail-SettingsButton");Object(i.a)({name:t.name,anchor:e,Component:r.a,props:{canUseBackup:Object(a.canUseBackup)(),hasProSubscription:Object(u.hasProSubscription)()}})},this.off=function(){Jane.Promo.turnOffPromo(t.name)}};t.default=new c},5894:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(5895),r=n(495),i=n.n(r),a=n(527),u=n(323),c=(n.n(u),Object(u.compose)(Object(a.a)({sendMetric:!0,metricRoot:o.a.METRIC_ROOT,offOnShow:!1}),i()())(o.a))},5895:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){d||(d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:d,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return j}));var d,m=n(321),h=n.n(m),b=n(322),y=n.n(b),O=n(352),_=n.n(O),v=n(359),g=n(325),P=n(329),E=function(){return _()()("PromoBackup")},S=p(v.i.Description,{},void 0,p(g.default,{loc:"promo-react/backup-description"})),w=p(g.default,{loc:"promo-react/backup-cancel"}),C=p(g.default,{loc:"promo-react/backup-action-paid"}),j=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=s(t)).call.apply(e,[this].concat(i))),n._logMetric=function(e){var o=n.props,r=o.canUseBackup,i=o.hasProSubscription,a=r?"premium user":i?"paid user":"free user";Object(P.logMetric)([t.METRIC_ROOT,e,a])},n._onCancel=function(){n._close(),n._logMetric("cancel")},n._onAction=function(){n._close(),n._logMetric("action")},n}return l(t,e),a(t,[{key:"_close",value:function(){var e=this.props,t=e.off,n=e.dispose;t(),n()}},{key:"render",value:function(){var e=this.props,t=e.anchor,n=e.canShowHeaderPromo,o=e.tone,r=e.popupRef,i=e.tooltipClass;return p(v.i,{anchor:t,cls:E().mix(i).toString(),size:"m",theme:"promo",to:["bottom-center","bottom-right"],tone:o,visible:n,popupProps:{ref:r}},void 0,S,p(v.i.Buttons,{},"buttons",p(v.i.Buttons.Clear,{onClick:this._onCancel},void 0,w),p(v.i.Buttons.Action,{onClick:this._onAction,type:"link",url:"#setup/backup"},void 0,C)))}},{key:"_userType",get:function(){var e=this.props,t=e.canUseBackup,n=e.hasProSubscription;return t?"premium user":n?"paid user":"free user"}}]),t})(h.a.PureComponent);j.propTypes={anchor:y.a.object,canShowHeaderPromo:y.a.bool,canUseBackup:y.a.bool,dispose:y.a.func.isRequired,hasProSubscription:y.a.bool,popupRef:y.a.object,off:y.a.func.isRequired,tone:y.a.string,tooltipClass:y.a.string},j.METRIC_ROOT="Promo Backup"},5896:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(410),r=n(5897),i=n(329);t.default={name:"telegram-bot-promo",params:{ignorePromoDelay:!0,ignoreStartPromoDelay:!0,ignoreInboxMessages:!0,ignoreKCUFfilter:!0,showOnlyOnce:!0},check:function(){return-1!==["ru","en"].indexOf(Object(i.getLocale)())},callback:function(){Object(o.a)({name:this.name,Component:r.a})}}},5897:function(e,t,n){"use strict";var o=n(5898);n.d(t,"a",(function(){return o.a}))},5898:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){d||(d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:d,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d,m=n(321),h=n.n(m),b=n(322),y=n.n(b),O=n(336),_=n(325),v=n(323),g=(n.n(v),n(495)),P=n.n(g),E=n(329),S=n(352),w=n.n(S),C=n(5899),j=(n.n(C),function(){return w()()("mail-TelegramBotPromo")}),M="TelegramBotPromo",T=p(O.default.Description,{},void 0,p("b",{},void 0,p(_.default,{loc:"promo-react/TelegramBot_Title"})),p("br",{}),p(_.default,{loc:"promo-react/TelegramBot_Description"})),k=p(_.default,{loc:"promo-react/TelegramBot_Action"}),R=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=s(t)).call.apply(e,[this].concat(i))),n._onAction=function(){Object(E.logMetric)([M,'Click "Open in Telegram"']),n.props.dispose()},n._onClose=function(){Object(E.logMetric)([M,'Click "Close"']),n.props.dispose()},n}return l(t,e),a(t,[{key:"render",value:function(){var e={cls:j().toString(),tone:this.props.tone,theme:"promo",size:"m",to:"top",visible:!0,tail:!1,popupProps:{target:"position",position:{top:5,left:0},style:{top:5,right:16,bottom:"unset",left:"unset"},motionless:!0}};return h.a.createElement(O.default,e,T,p(O.default.Buttons,{},void 0,p(O.default.Buttons.Action,{type:"link",target:"blank",url:"https://t.me/YandexMail360_bot",onClick:this._onAction,rel:"noopener noreferrer"},void 0,k)),p(O.default.Close,{onClick:this._onClose}))}},{key:"componentDidMount",value:function(){Object(E.logMetric)([M,"Show"])}}]),t})(h.a.PureComponent);R.propTypes={tone:y.a.oneOf(["dark","default"]),dispose:y.a.func.isRequired},t.a=Object(v.compose)(P()())(R)},5899:function(e,t){},5900:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoNewyear",(function(){return p}));var u=n(5901),c=n(410),s=n(1080),l=n.n(s),f=n(613),p=(function(){function e(){var t=this;r(this,e),this.name="promo-newyear",this.params={ignorePromoDelay:!0,ignoreShowPromoSetting:!0},this.check=function(){return!ns.Model.get("settings").getSign("with_new_year")&&Object(f.d)(Daria.promoNow(),l.a)&&t._checkLastShownTime()},this.callback=function(){var e=document.querySelector(".mail-ThemesButton");Object(c.a)({name:t.name,anchor:e,Component:u.a})},this.off=function(){ns.Model.get("settings").setSettings(o({},t.name,Daria.promoNow()))}}return a(e,[{key:"_checkLastShownTime",value:function(){var e=ns.Model.get("settings").getSign(this.name);if(!e)return!0;var t=new Date(Number(e)),n=Object(f.a)(Daria.promoNow(),l.a),o=n.from,r=n.to;return!(t>=o&&t<r)}}]),e})();t.default=new p},5901:function(e,t,n){"use strict";var o=n(5902);n.d(t,"a",(function(){return o.a}))},5902:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){d||(d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:d,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d,m=n(321),h=n.n(m),b=n(322),y=n.n(b),O=n(352),_=n.n(O),v=n(359),g=n(325),P=n(527),E=n(378),S=n(329),w=n(5903),C=(n.n(w),function(){return _()()("PromoNewYear")}),j=p(v.i.Description,{},void 0,p("b",{},void 0,p(g.default,{loc:"promo-react/new-year-title"})),p("p",{},void 0,p(g.default,{loc:"promo-react/new-year-description"},void 0,p("br",{"data-ref":"br"})))),M=p(g.default,{loc:"promo-react/new-year-cancel"}),T=p(g.default,{loc:"promo-react/new-year-action"}),k=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=s(t)).call.apply(e,[this].concat(i))),n._onCancel=function(){n._onClose(),Object(S.logMetric)([t.METRIC_ROOT,"cancel"])},n._onAction=function(){Object(E.getThemesService)().setTheme("newyear"),n._onClose(),Object(S.logMetric)([t.METRIC_ROOT,"confirm"])},n}return l(t,e),a(t,[{key:"_onClose",value:function(){var e=this.props,t=e.off,n=e.dispose;t(),n()}},{key:"render",value:function(){var e=this.props,t=e.anchor,n=e.canShowHeaderPromo,o=e.popupRef,r=e.tooltipRef,i=e.tooltipClass;return h.a.createElement(v.i,{anchor:t,cls:C().mix(i).toString(),ref:r,size:"m",theme:"promo",to:["bottom-right"],tone:"default",visible:n,popupProps:{ref:o}},j,p(v.i.Buttons,{},"buttons",p(v.i.Buttons.Clear,{onClick:this._onCancel},void 0,M),p(v.i.Buttons.Action,{onClick:this._onAction},void 0,T)))}}]),t})(h.a.PureComponent);k.propTypes={anchor:y.a.object,canShowHeaderPromo:y.a.bool,dispose:y.a.func.isRequired,off:y.a.func.isRequired,popupRef:y.a.object,tooltipClass:y.a.string,tooltipRef:y.a.object},k.METRIC_ROOT="New Year Promo",t.a=Object(P.a)({sendMetric:!0,metricRoot:k.METRIC_ROOT})(k)},5903:function(e,t){},5904:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoNewyearOver",(function(){return p}));var u=n(5905),c=n(410),s=n(1080),l=n.n(s),f=n(613),p=(function(){function e(){var t=this;r(this,e),this.name="promo-newyear-over",this.params={ignorePromoDelay:!0},this.check=function(){var e=ns.Model.get("settings").getSign("with_new_year"),n=t._isPromoPeriod(Daria.promoNow());return e&&n&&t._checkLastShownTime()},this.callback=function(){var e=document.querySelector(".mail-ThemesButton");Object(c.a)({name:t.name,anchor:e,Component:u.a})},this.off=function(){ns.Model.get("settings").setSettings(o({},t.name,Daria.promoNow()))}}return a(e,[{key:"_isPromoPeriod",value:function(e){var t=this._getPromoPeriod(e);return Object(f.d)(e,t)}},{key:"_getPromoPeriod",value:function(e){e=new Date(e);var t=new Date(e.getFullYear(),l.a.to.month-1,l.a.to.day-7+1);return{from:{month:t.getMonth()+1,day:t.getDate()},to:l.a.to}}},{key:"_checkLastShownTime",value:function(){var e=ns.Model.get("settings").getSign(this.name);if(!e)return!0;var t=new Date(Number(e)),n=Object(f.a)(Daria.promoNow(),this._getPromoPeriod(Daria.promoNow())),o=n.from,r=n.to;return!(t>=o&&t<r)}}]),e})();t.default=new p},5905:function(e,t,n){"use strict";var o=n(5906);n.d(t,"a",(function(){return o.a}))},5906:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){b||(b="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:b,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d,m,h,b,y=n(321),O=n.n(y),_=n(322),v=n.n(_),g=n(323),P=(n.n(g),n(359)),E=n(325),S=n(527),w=n(495),C=n.n(w),j=n(329),M=n(368),T=n(613),k=n(1080),R=n.n(k),A=n(350),I=n.n(A),D=n(324),N=n(327),B=n(341),L=p("b",{},void 0,p(E.default,{loc:"promo-react/new-year-over-title"})),x=p(E.default,{loc:"promo-react/new-year-over-action"}),F=Object(N.observer)((h=m=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=s(t)).call.apply(e,[this].concat(i))),n.disposer=new I.a,n._onAction=function(){n._onClose(),Object(j.logMetric)([t.METRIC_ROOT,"confirm"])},n._onOpenThemesStore=function(e){e&&(n._onClose(),Object(j.logMetric)([t.METRIC_ROOT,"click on themes"]))},n}return l(t,e),a(t,[{key:"_onClose",value:function(){(0,this.props.dispose)()}},{key:"componentDidMount",value:function(){this.disposer.add(this,[Object(D.reaction)((function(){return Object(B.getThemesSelectorStore)().isOpened}),this._onOpenThemesStore)])}},{key:"componentWillUnmount",value:function(){this.disposer.disposeAll()}},{key:"render",value:function(){var e=this.props,n=e.anchor,o=e.canShowHeaderPromo,r=e.popupRef,i=e.tooltipRef,a=e.tooltipClass;return O.a.createElement(P.i,{anchor:n,cls:a,ref:i,size:"m",theme:"promo",to:["bottom-right"],tone:"default",visible:o,popupProps:{ref:r}},p(P.i.Description,{},void 0,L,p("p",{},void 0,p(E.default,{loc:"promo-react/new-year-over-description",params:{date:t.DATE}}))),p(P.i.Buttons,{},"buttons",p(P.i.Buttons.Action,{onClick:this._onAction},void 0,x)))}}]),t})(O.a.PureComponent),m.propTypes={anchor:v.a.object,canShowHeaderPromo:v.a.bool,dispose:v.a.func.isRequired,popupRef:v.a.object,tooltipRef:v.a.object,tooltipClass:v.a.string},m.METRIC_ROOT="New Year Promo Over",m.DATE=Object(M.getShortDate)(Object(T.a)(Daria.promoNow(),R.a).to),d=h))||d;t.a=Object(g.compose)(Object(S.a)({sendMetric:!0,metricRoot:F.METRIC_ROOT,offOnShow:!0}),C()())(F)},5907:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoUnsupportedLocales",(function(){return a}));var r=n(5908),i=n(410),a=function e(){var t=this;o(this,e),this.name="promo-unsupported-locales",this.params={ignorePromoDelay:!0,ignoreShowPromoSetting:!0},this.check=function(){return Daria.Config.localeUnsupported&&!t._getPromoSetting().promoClosed},this._getPromoSetting=function(){return ns.Model.get("settings").getSetting(t.name,"json")||{}},this.callback=function(){var e=document.querySelector(".mail-SettingsButton");Object(i.a)({name:t.name,anchor:e,Component:r.a})},this.off=function(){ns.Model.get("settings").updateSetting(t.name,{promoClosed:!0})}};t.default=new a},5908:function(e,t,n){"use strict";var o=n(5909),r=n(323),i=(n.n(r),n(527)),a=n(495),u=n.n(a);t.a=Object(r.compose)(Object(i.a)(),u()())(o.a)},5909:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){d||(d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:d,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return g}));var d,m=n(321),h=n.n(m),b=n(322),y=n.n(b),O=n(359),_=n(325),v=p(O.i.Description,{},void 0,p(_.default,{loc:"common-react/promo-mail-unsupported-langs"})),g=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=s(t)).call.apply(e,[this].concat(i))),n._onClose=function(){var e=n.props,t=e.off,o=e.dispose;t(),o()},n}return l(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.anchor,n=e.canShowHeaderPromo,o=e.popupRef,r=e.tooltipRef,i=e.tone,a=e.tooltipClass;return h.a.createElement(O.i,{anchor:t,cls:a,ref:r,size:"m",theme:"promo",to:["bottom-center","bottom-right"],tone:i,visible:n,popupProps:{ref:o}},p(O.i.Close,{onClick:this._onClose}),v,p(O.i.Corner,{mods:{star:"yes",side:"bottom-left"}}))}}]),t})(h.a.PureComponent);g.propTypes={anchor:y.a.object,canShowHeaderPromo:y.a.bool,dispose:y.a.func.isRequired,off:y.a.func.isRequired,tone:y.a.string,popupRef:y.a.object,tooltipRef:y.a.object,tooltipClass:y.a.string}},5910:function(e,t,n){"use strict";function o(e,t,n,o,r,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function a(e){o(c,r,i,a,u,"next",e)}function u(e){o(c,r,i,a,u,"throw",e)}var c=e.apply(t,n);a(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoBeautifulEmailConnected",(function(){return f}));var c=n(579),s=n(371),l=(n.n(s),n(476)),f=(function(){function e(){i(this,e),this.name="promo-domain-connected",this.params={ignorePromoDelay:!0,ignoreStartPromoDelay:!0,ignoreInboxMessages:!0,notAffectPromoDelay:!0}}return u(e,[{key:"check",value:(function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(s.isAvailable)()){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:if(t=Object(s.getConnectedBeautifulEmail)(),Object(l.isDefaultEmail)(t)){e.next=5;break}return e.abrupt("return",Promise.reject());case 5:case"end":return e.stop()}}),e)})));return e})()},{key:"callback",value:function(){var e=Object(c.getStatuslineState)(),t="BeautifulEmailConnectedPromo";e.show({name:t,hideOnTimeout:!1,hideOnClick:!1,params:{domainAlias:Object(l.getDefaultEmail)(),onAction:function(){ns.page.go("#setup/sender")},onClose:function(){e.hide(t,!0)}}}),this.off()}},{key:"off",value:function(){Jane.Promo.turnOffPromo(this.name)}}]),e})();t.default=new f},5911:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoPriorityTab",(function(){return a}));var r=n(5912),i=n(410),a=function e(){var t=this;o(this,e),this.name="promo-priority-tab",this.params={ignorePromoDelay:!0},this.check=function(){return Daria.isPriorityTabEnabled()&&!t._getPromoSetting().promoClosed},this._getPromoSetting=function(){return ns.Model.get("settings").getSetting(t.name,"json")||{}},this.callback=function(){var e=document.querySelector(".mail-Tabs-Item-Priority");Object(i.a)({name:t.name,anchor:e,Component:r.a})},this.off=function(){ns.Model.get("settings").updateSetting(t.name,{promoClosed:!0})}};t.default=new a},5912:function(e,t,n){"use strict";var o=n(495),r=n.n(o),i=n(5913);t.a=r()()(i.a)},5913:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,o){g||(g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:g,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,r){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n.d(t,"a",(function(){return x}));var h,b,y,O,_,v,g,P=n(321),E=n.n(P),S=n(322),w=n.n(S),C=n(134),j=n.n(C),M=n(327),T=n(324),k=n(359),R=n(325),A=n(341),I=n(350),D=n.n(I),N=n(329),B=p(k.i.Description,{},void 0,p("b",{},void 0,p(R.default,{loc:"common-react/PriorityLetter_Tab_Promo_Title"})),p("p",{},void 0,p(R.default,{loc:"common-react/PriorityLetter_Tab_Promo_Description"}))),L=p(R.default,{loc:"common-react/PriorityLetter_Tab_Promo_ActionText"}),x=Object(M.observer)((v=_=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=c(t)).call.apply(e,[this].concat(i))),n.disposer=new D.a,n._popup=E.a.createRef(),d(s(n),"isAnchorVisible",y,s(n)),n._onAction=function(){Object(N.logMetric)([t.METRIC_ROOT,"confirm"]),n.props.dispose()},d(s(n),"_rerender",O,s(n)),n.sendShowMetric=function(e){e&&(Object(N.logMetric)([t.METRIC_ROOT,"show"]),n.disposer.dispose("show-metric"),n.props.off())},n._update=function(){n._popup&&n._popup.current&&n._popup.current.forceUpdate()},n}return l(t,e),a(t,[{key:"_checkAnchorVisibilily",value:function(){if(!this.props.anchor)return!1;var e=window.getComputedStyle(this.props.anchor,null),t=parseFloat(e.getPropertyValue("width")),n=parseFloat(e.getPropertyValue("height")),o=Object(N.is3Pane)()?document.querySelector(".js-scroller-left"):null,r=!o||o.scrollTop<this.props.anchor.offsetTop+n/2;return t>0&&n>0&&r&&!Object(N.hasFixedToolbar)()}},{key:"componentDidMount",value:function(){var e=this;this.disposer.add(this,[Object(I.addNsEventListener)("daria:vApp:changeLeftColumWidth",this._rerender),Object(I.addNsEventListener)("daria:vApp:disableLeftColumnResize",this._rerender),Object(I.addNsEventListener)("daria:vApp:changeAppWidth",this._rerender),Object(I.addNsEventListener)("ns-page-after-load",this._rerender),Object(I.addNsEventListener)("daria:vScrollerLeft:scroll",j.a.throttle(this._rerender,50))]),this.disposer.add("show-metric",[Object(T.reaction)((function(){return e.isPromoVisible}),this.sendShowMetric,{fireImmediately:!0})])}},{key:"componentWillUnmount",value:function(){this.disposer.dispose(this),this.disposer.dispose("show-metric")}},{key:"render",value:function(){var e=this.props,t=e.anchor,n=e.tone,o=e.tooltipClass;return E.a.createElement(k.i,{anchor:t,cls:o,ref:this._popup,size:"m",theme:"promo",to:"right-center",tone:n,visible:this.isPromoVisible},B,p(k.i.Buttons,{},"buttons",p(k.i.Buttons.Action,{onClick:this._onAction},void 0,L)))}},{key:"isPromoVisible",get:function(){var e=Object(A.getRouterStore)();return this.isAnchorVisible&&(e.isMessagePage||e.isMessagesListPage)}}]),t})(E.a.PureComponent),_.propTypes={anchor:w.a.object,dispose:w.a.func.isRequired,off:w.a.func.isRequired,tone:w.a.string,tooltipClass:w.a.string},_.METRIC_ROOT="Priority Tab promo",b=v,y=m(b.prototype,"isAnchorVisible",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this._checkAnchorVisibilily()}}),m(b.prototype,"isPromoVisible",[T.computed],Object.getOwnPropertyDescriptor(b.prototype,"isPromoVisible"),b.prototype),O=m(b.prototype,"_rerender",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isAnchorVisible=e._checkAnchorVisibilily(),e._update()}}}),h=b))||h},5914:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PromoMailPro",(function(){return s}));var a=n(69),u=(n.n(a),n(1371)),c="promo-mail-pro-left-column",s=(function(){function e(){var t=this;o(this,e),this.afterCreate=function(){t.sendShowPromoMetrika(),t.changeShowPromoParameters()},this.name=c,this.params={ignorePromoDelay:!0}}return i(e,[{key:"changeShowPromoParameters",value:function(){var e=ns.Model.get("settings"),t=this._getPromoSetting().showCount,n=this._getPromoSetting().resumeCount;e.updateSetting(this.name,{lastShown:Daria.now(),resumeCount:n&&this._isTimeOfShowPromoExpired()?n+1:0,showCount:t?t+1:1})}},{key:"sendShowPromoMetrika",value:function(){if(this._getPromoSetting().resumeCount)return void Jane.c("Mail.PRO promo left column","Resumed show");this._getPromoSetting().showCount>0?Jane.c("Mail.PRO promo left column","Further show"):Jane.c("Mail.PRO promo left column","First show")}},{key:"_getPromoSetting",value:function(){return ns.Model.get("settings").getSetting(this.name,"json")||{}}},{key:"_getDaysInterval",value:function(){return Object(a.getFeatureParams)(a.Features.WEB_AD_ON_YES_MAIL_PRO).days_interval||60}},{key:"_isTimeOfShowPromoExpired",value:function(){var e=this._getDaysInterval(),t=this._getPromoSetting(),n=Daria.now()-t.lastShown>Jane.Date.DAY*e;if(n){ns.Model.get("settings").updateSetting(this.name,{promoClosed:!1})}return n}},{key:"off",value:function(){ns.Model.get("settings").updateSetting(this.name,{promoClosed:!0})}},{key:"check",value:function(){return!Object(u.a)()&&(!!Daria.hasPromoMailProInLeftColumn()&&(!!this._isTimeOfShowPromoExpired()||!this._getPromoSetting().promoClosed&&(Daria.isMessagePage()||Daria.isMessagesListPage())))}},{key:"callback",value:function(){Daria.React.promoMailProLeftColumn.create(this.afterCreate)}}]),e})();t.default=new s},5915:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5916);t.default={name:"tabs-wizard",params:{showOnlyOnce:!1,ignoreInboxMessages:!1,ignoreShowPromoSetting:!0,ignoreKCUFfilter:!1,ignorePromoDelay:!0,ignoreStartPromoDelay:!0},check:function(){return Object(o.a)()},callback:function(){Jane.Services.runModules(["wizard.js","wizard.css"]).then((function(){Daria.IntroduceTabsWizard.show()}))}}},5916:function(e,t,n){"use strict";function o(){return"tabs"===Daria.urlParams.wizard||!Daria.Config.NO_SETTINGS&&(!ns.Model.get("settings").isSet("tabs_wizard")&&(!ns.Model.get("settings").getSign("show_folders_tabs")&&Daria.canUseTabs()))}t.a=o},5917:function(e,t,n){"use strict";function o(e,t){return a(e)||i(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return n}}function a(e){if(Array.isArray(e))return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}Object.defineProperty(t,"__esModule",{value:!0});var l={MIN_NEWSLETTERS_COUNT:10,MAX_SHOW_COUNT:1,DELAY_DAYS:NaN,promo:Daria.React.promoSubscriptions},f="promo-unsubscribe-popup",p=(function(){function e(){u(this,e),this.name=f,this.params={ignorePromoDelay:!0,ignoreStartPromoDelay:!0,ignoreInboxMessages:!1,ignoreKCUFfilter:!1,showOnlyOnce:!1,ignoreShowPromoSetting:!1},this.mSettings=null}return s(e,[{key:"check",value:function(){var e=this.getShownSetting(),t=Daria.promoNow()-e.lastTimeShown;return!(e.shownCount>=l.MAX_SHOW_COUNT||e.stopShow)&&(!(1===e.shownCount&&t<864e5*l.DELAY_DAYS)&&(!this.getSettingsModel().isSet("liza_minified_header")&&this.getSubscriptions().then((function(e){return e.length>=l.MIN_NEWSLETTERS_COUNT?Vow.resolve():Vow.reject("error get newsletters")}))))}},{key:"callback",value:function(){l.promo.create()}},{key:"getSettingsModel",value:function(){return this.mSettings||(this.mSettings=ns.Model.get("settings")),this.mSettings}},{key:"getSubscriptions",value:function(){return ns.request("get-active-subscriptions/v1").then((function(e){return o(e,1)[0].get(".subscriptions")||[]})).fail((function(){return[]}))}},{key:"setStopShowSetting",value:function(){this.getSettingsModel().updateSetting(f,{stopShow:!0})}},{key:"setShownSettingDelay",value:function(){var e=this.getShownSetting().shownCount;this.getSettingsModel().updateSetting(f,{lastTimeShown:Daria.promoNow(),shownCount:e?++e:1})}},{key:"getShownSetting",value:function(){return this.getSettingsModel().getSetting(f,"json")||{}}},{key:"getCurrentMessage",value:function(){return 1===this.getShownSetting().shownCount?i18n("%Common.UnsubscribeSecondMessage"):i18n("%Common.UnsubscribeMessage")}},{key:"isAvailablePage",value:function(){return!0}}]),e})();t.default=new p},5918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r={DEFAULT:Jane.Date.WEEK,AFTER_FIRST_CLOSE:1.5*Jane.Date.MONTH,AFTER_SECOND_CLOSE:3*Jane.Date.MONTH},i=[r.DEFAULT,r.AFTER_FIRST_CLOSE,r.AFTER_SECOND_CLOSE],a={lastShowTime:0,delay:r.DEFAULT,forceNextShow:!1},u=Object.defineProperties({},{DO_NOT_SHOW_PROMO:{get:function(){var e=vow.reject();return e.catch(_.noop),e}},SHOW_PROMO:{get:function(){return vow.resolve()}}}),c=!1;t.default={name:"push-notifications",params:{ignorePromoDelay:!0,ignoreStartPromoDelay:!0,ignoreInboxMessages:!0},check:function(){if(c)return!1;c=!0;var e=ns.Model.get("settings"),t=Boolean(e.getSetting("browser_notify_message")),n=Daria.UA,o=n.BrowserName,r=n.BrowserVersion,i="YandexBrowser"===o&&r<18.6;return t||i?u.DO_NOT_SHOW_PROMO:this.isItNotTimeToShow()?u.DO_NOT_SHOW_PROMO:this.shouldShowPromo()},shouldShowPromo:function(){var e=ns.Model.get("settings"),t=!Daria.PushManager.compatible,n=e.hasSetting("browser_notify_message");if(t||n)return u.DO_NOT_SHOW_PROMO;if("denied"===Daria.PushManager.permission())return u.DO_NOT_SHOW_PROMO;if("granted"===Daria.PushManager.permission())return e.setSettingOn("browser_notify_message"),u.DO_NOT_SHOW_PROMO;var o=ns.Model.get("push-subscriptions",{clients:"bar,yabrowser"});if(o.isValid()){var r=this.extractSubscriptions(o);return this.checkSubscriptions(r).isFulfilled()?u.SHOW_PROMO:u.DO_NOT_SHOW_PROMO}return this.getSubscriptions().then(this.checkSubscriptions)},checkSubscriptions:function(e){var t="YandexBrowser"===Daria.UA.BrowserName&&e.yabrowser,n=Daria.hasYaBar&&e.bar;return t||n?u.DO_NOT_SHOW_PROMO:u.SHOW_PROMO},isItNotTimeToShow:function(){var e=ns.Model.get("settings");return o=_.assign(a,e.getSetting("push-notifications-promo","json")),o.forceNextShow?(e.updateSetting("push-notifications-promo",{forceNextShow:!1}),!1):!(Daria.promoNow()-o.lastShowTime>o.delay&&(e.updateSetting("push-notifications-promo",{forceNextShow:!0}),1))},getSubscriptions:function(){return ns.request("push-subscriptions",{clients:"bar,yabrowser"}).then(this.extractSubscriptions)},extractSubscriptions:function(e){var t="push-subscriptions"===e.id?e.data:e&&e[0]&&e[0].data;return _.reduce(t,(function(e,t){return e[t.client]=!0,e}),{})},callback:function(){var e=Daria.Dialog.open({width:550,body:Jane.tt("promo:promo-default",{icon:"mail-PushNotificationsPromo_Icon",title:i18n("%Promo_PushNotifications_Title"),description:i18n("%Promo_PushNotifications_Description")}),onTarget:{side:"right",needTail:!1},additionalClass:["mail-PushNotificationsPromo","js-push-notifications-promo"],paranjaFade:!1,dontCloseOnPageGo:!0,easyclose:!1,oncancel:function(){var e=(i.indexOf(o.delay)+1)%i.length,t=i[e];ns.Model.get("settings").updateSetting("push-notifications-promo",{forceNextShow:!1,delay:t}),Jane.c("Промо браузерных пушей","Клик в крестик")},onopen:function(){$(".js-push-notifications-promo").addClass("js-show-push-notifications-promo"),ns.Model.get("settings").updateSetting("push-notifications-promo",{lastShowTime:Daria.promoNow(),delay:r.DEFAULT}),Jane.c("Промо браузерных пушей","Показ")},buttons:[{promo:!0,customClass:"mail-PushNotificationsPromo_Button",title:i18n("%Promo_PushNotifications_ButtonTitle"),name:"enable-push-notifications",onclick:function(){ns.Model.get("settings").setSettingOn("browser_notify_message"),e.close(),Jane.c("Промо браузерных пушей",'Клик в "Включить уведомления"')}}]})}}},5919:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=d(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var y=n(508),O=n(386),_=(n.n(O),n(69)),v=(n.n(_),(function(e){function t(e){var n;return u(this,t),n=l(this,m(t).call(this,e)),n.params=i({},n.params,{ignoreCORPfilter:!0}),n}return h(t,e),s(t,[{key:"check",value:function(){return Object(_.hasFeature)(_.Features.WEB_COMPOSE_PROMO_NEW_AGAIN)&&p(m(t.prototype),"check",this).call(this)}}]),t})(y.a));t.default=new v({name:O.Promo.COMPOSE_NEW_AGAIN})},5920:function(e,t,n){"use strict";var o=n(761);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)().then((function(){return Daria.React.Compose.showPromo(e)}))}},5921:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=p(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(508),h=n(386),b=(n.n(h),n(333)),y=n(371),O=(n.n(y),n(476)),_=n(341),v=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=d(t)).call.apply(e,[this].concat(i))),n.callback=function(){f(d(t.prototype),"callback",c(n)).call(c(n),Object(_.getAccountInformationStore)().domainAlias)},n}return s(t,e),a(t,[{key:"check",value:function(){return Object(y.isAvailable)()&&Object(O.isDefaultEmail)(Object(y.getConnectedBeautifulEmail)())&&f(d(t.prototype),"check",this).call(this)}}]),t})(m.a);t.default=new v({name:h.Promo.COMPOSE_BEAUTIFUL_EMAIL,settingName:b.h.BEAUTIFUL_EMAIL_PROMO_CLOSED})},5922:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=l(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(508),h=n(386),b=(n.n(h),n(69)),y=(n.n(b),(function(e){function t(){return r(this,t),u(this,f(t).apply(this,arguments))}return p(t,e),a(t,[{key:"check",value:function(){return Object(b.hasFeature)(b.Features.WEB_COMPOSE_FEEDBACK_PROMO)&&s(f(t.prototype),"check",this).call(this)}}]),t})(m.a));t.default=new y({name:h.Promo.COMPOSE_FEEDBACK})},5923:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=l(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(508),h=n(386),b=(n.n(h),n(333)),y=(function(e){function t(){return r(this,t),u(this,f(t).apply(this,arguments))}return p(t,e),a(t,[{key:"check",value:function(){return"small"===ns.Model.get("settings").getSign("last_used_compose_size")&&s(f(t.prototype),"check",this).call(this)}}]),t})(m.a);t.default=new y({name:h.Promo.COMPOSE_TO_BIGGER_SIZE,settingName:b.h.TO_BIGGER_SIZE_PROMO})},5924:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=l(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(508),h=n(386),b=(n.n(h),n(333)),y=(function(e){function t(){return r(this,t),u(this,f(t).apply(this,arguments))}return p(t,e),a(t,[{key:"check",value:function(){return"large"===ns.Model.get("settings").getSign("last_used_compose_size")&&s(f(t.prototype),"check",this).call(this)}}]),t})(m.a);t.default=new y({name:h.Promo.COMPOSE_TO_SMALLER_SIZE,settingName:b.h.TO_SMALLER_SIZE_PROMO})},5925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(508),r=n(386),i=(n.n(r),n(333));t.default=new o.a({name:r.Promo.COMPOSE_AUTOCOMPLETE,settingName:i.h.AUTOCOMPLETE_PROMO_CLOSED})},5926:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=l(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(508),h=n(386),b=(n.n(h),n(333)),y=n(594),O=(function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=u(this,(e=f(t)).call.apply(e,[this].concat(i))),n.settingsService=y.a.instance(),n}return p(t,e),a(t,[{key:"check",value:function(){return this.settingsService.hasBetaButton&&!this.settingsService.hasDeleteDraftButton&&s(f(t.prototype),"check",this).call(this)}}]),t})(m.a);t.default=new O({name:h.Promo.COMPOSE_BETA,settingName:b.h.NS_COMPOSE_PROMO_CLOSED})},5927:function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n,o,r,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(o,r)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){function a(e){r(c,o,i,a,u,"next",e)}function u(e){r(c,o,i,a,u,"throw",e)}var c=e.apply(t,n);a(void 0)})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=m(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var b=n(508),y=n(386),O=(n.n(y),n(333)),_=n(1079),v=(function(e){function t(){var e,n;a(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=s(this,(e=h(t)).call.apply(e,[this].concat(r))),n.suggestedEmail="",n.callback=function(){d(h(t.prototype),"callback",l(n)).call(l(n),n.suggestedEmail)},n}return f(t,e),c(t,[{key:"check",value:(function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Daria.isReactiveCompose()&&!ns.Model.get("settings").getSign(this.settingName)){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:return e.next=4,Object(_.a)();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",Promise.reject());case 7:this.suggestedEmail=t;case 8:case"end":return e.stop()}}),e,this)})));return e})()}]),t})(b.a);t.default=new v({name:y.Promo.COMPOSE_SUGGEST_BEAUTIFUL_EMAIL,settingName:O.h.SUGGEST_BEAUTIFUL_EMAIL_PROMO_CLOSED})},5928:function(e,t){ns.layout.define("promo-disk-tab-popup",{"promo-disk-tab":{}})},5929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5930);n.n(o)},5930:function(e,t){!(function(){var e=["Промо диска"];ns.View.define("promo-disk-tab",{events:{"click .js-disk-tab-popup-close":"onCloseClick","click .js-disk-tab-promo-button":"onButtonClick","resize window":"close"},yateModule:"promo",ctor:function(){this.onClosed=this._onClosed.bind(this)},methods:{_metrika:function(){Jane.c(e.concat(Array.prototype.slice.call(arguments)))},show:function(e){var t=this;this._render().then((function(){return t._open(e)}))},close:function(){this.nbPopup&&this.nbPopup.close()},onButtonClick:function(){this._metrika("Клик на кнопку"),this.close()},onCloseClick:function(e){return this.close(),this._metrika("Закрытие крестом"),e.preventDefault(),!1},_render:function(){return new ns.Update(this,ns.layout.page("promo-disk-tab-popup",{}),{},{execFlag:ns.U.EXEC.PARALLEL}).render()},_open:function(e){var t=_.extend({class:"mail-DiskTabPromo-Container",autofocus:!1},e);this.nbPopup=nb.block(this.node),this._bindCustomEvents(),this._metrika("Показ промо"),this.nbPopup.open(t)},_bindCustomEvents:function(){this.nbPopup.on("nb-closed",this.onClosed)},_unbindCustomEvents:function(){this.nbPopup.off("nb-closed",this.onClosed)},_onClosed:function(){var e=this;this._unbindCustomEvents(),_.defer((function(){e.nbPopup&&e.nbPopup.destroy(),e.nbPopup=null,e.destroy()}))}}})})()},594:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",(function(){return p}));var u=n(134),c=(n.n(u),n(69)),s=(n.n(c),n(411)),l=n(404),f=n(333),p=(function(){function e(){r(this,e)}return a(e,[{key:"toggleAutocomplete",value:function(){this.data.toggleSetting(f.h.DISABLE_AUTOCOMPLETE_REACT)}},{key:"registerChangeSettingsHandler",value:function(e,t){var n=this,o=t?"ns-model-changed.".concat(t):"ns-model-changed",r=function(t,n,o,r,i){e({eventName:t,jpath:n,fullJpath:o,data:r,previousValue:i})};return this.data.on(o,r),function(){n.data.off(o,e)}}},{key:"getFeedbackLink",value:function(){return"https://yandex.ru/support/mail/web/letter/create/write-letter.html#feedback-form__feedback_ru"}},{key:"data",get:function(){return ns.Model.get("settings")}},{key:"areHotkeysEnabled",get:function(){return this.data.getSetting(f.h.ENABLE_HOTKEYS)}},{key:"storedComposeStates",get:function(){var e=decodeURIComponent(this.data.getSetting(f.h.STORED_COMPOSE_STATES));return e&&"undefined"!==e?JSON.parse(e):[]},set:function(e){"string"!=typeof e&&(e=JSON.stringify(e)),this.data.setSettings({storedComposeStates:encodeURIComponent(e)})}},{key:"sizeLayout",get:function(){return Number(this.data.getSetting(f.h.SIZE_LAYOUT))}},{key:"sizeLayoutLeft",get:function(){return Number(this.data.getSetting(f.h.SIZE_LAYOUT_LEFT))}},{key:"timelineEnabled",get:function(){return this.data.checkTimelineEnable()}},{key:"timelineExpanded",get:function(){return""!==this.data.getSetting(f.h.TIMELINE_EXPANDED)}},{key:"todoEnabled",get:function(){return this.data.getSetting(f.h.TODO_ENABLED)}},{key:"isComposeAutocompleteEnabled",get:function(){return Object(s.c)()===l.a.REACT}},{key:"isNsComposePromoClosed",get:function(){return this.data.getSetting(f.h.NS_COMPOSE_PROMO_CLOSED)},set:function(e){this.data.setSettings(o({},f.h.NS_COMPOSE_PROMO_CLOSED,e))}},{key:"isRecipientsDiffPromoClosed",get:function(){return this.data.getSetting(f.h.RECIPIENTS_DIFF_PROMO_CLOSED)},set:function(e){this.data.setSettings(o({},f.h.RECIPIENTS_DIFF_PROMO_CLOSED,e))}},{key:"disableAutocompleteReact",get:function(){return this.data.getSetting(f.h.DISABLE_AUTOCOMPLETE_REACT)}},{key:"isAutocompletePromoClosed",get:function(){return this.data.getSetting(f.h.AUTOCOMPLETE_PROMO_CLOSED)},set:function(e){this.data.setSettings(o({},f.h.AUTOCOMPLETE_PROMO_CLOSED,e))}},{key:"isBeautifulEmailPromoClosed",get:function(){return this.data.getSetting(f.h.BEAUTIFUL_EMAIL_PROMO_CLOSED)},set:function(e){this.data.setSettings(o({},f.h.BEAUTIFUL_EMAIL_PROMO_CLOSED,e))}},{key:"hasBetaButton",get:function(){return!Object(c.hasFeature)(c.Features.WEB_COMPOSE_HIDE_BETA_BUTTON)&&!Object(c.hasFeature)(c.Features.WEB_COMPOSE_REACT_FOREVER)&&Daria.canSwitchToNsCompose()}},{key:"hasDeleteDraftButton",get:function(){return Object(c.hasFeature)(c.Features.WEB_COMPOSE_REACT_REMOVE_DRAFT)}},{key:"hasEmptySubjectPopup",get:function(){return!this.isMobile&&!this.isEmptySubjectPopupTurnedOff}},{key:"isEmptySubjectPopupTurnedOff",get:function(){return this.data.getSetting(f.h.EMPTY_SUBJECT_POPUP_DISABLED)},set:function(e){this.data.setSettings(o({},f.h.EMPTY_SUBJECT_POPUP_DISABLED,e))}},{key:"topLevelDomain",get:function(){return Daria.Config.TLD}},{key:"autocompleteDelay",get:function(){var e=Object(c.getFeatureParams)(c.Features.WEB_COMPOSE_AUTOCOMPLETE_REACT);return e&&"delay"in e?e.delay:30}},{key:"isMobile",get:function(){return Object(c.hasFeature)(c.Features.WEB_COMPOSE_2019_MOBILE)}},{key:"isTablet",get:function(){return this.isMobile&&Daria.UA.isTablet}},{key:"lang",get:function(){return Daria.locale||"ru"}},{key:"isTopSignature",get:function(){return this.data.getSetting(f.h.SIGNATURE_TOP)}},{key:"lastUsedComposeSize",get:function(){return this.data.getSetting(f.h.LAST_USED_COMPOSE_SIZE)},set:function(e){this.data.setSettings(o({},f.h.LAST_USED_COMPOSE_SIZE,e))}},{key:"hasFeedbackButton",get:function(){return Object(c.hasFeature)(c.Features.WEB_COMPOSE_FEEDBACK_PROMO)}}]),e})();p.instance=Object(u.memoize)((function(){return new p}))},613:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var o=function(e,t){e=new Date(e);var n=e.getFullYear(),o=n,r=new Date(n,t.to.month-1,t.to.day+1);return t.from.month>t.to.month&&(e<r&&(n-=1),o=n+1),{from:new Date(n,t.from.month-1,t.from.day),to:new Date(o,t.to.month-1,t.to.day+1)}},r=function(e,t){e=new Date(e);var n=o(e,t),r=n.from,i=n.to;return e>=r&&e<i},i=function(e){return e.slice(0,18)+"_s"},a=function(e){return!0!==e&&"on"!==e}},980:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPOSE_SUGGEST_BEAUTIFUL_EMAIL=t.COMPOSE_NEW_AGAIN=t.COMPOSE_BEAUTIFUL_EMAIL=t.COMPOSE_TO_SMALLER_SIZE=t.COMPOSE_TO_BIGGER_SIZE=t.COMPOSE_FEEDBACK=t.COMPOSE_BETA=t.COMPOSE_AUTOCOMPLETE=void 0,t.COMPOSE_AUTOCOMPLETE="promo-compose-autocomplete",t.COMPOSE_BETA="promo-compose-beta",t.COMPOSE_FEEDBACK="promo-compose-feedback",t.COMPOSE_TO_BIGGER_SIZE="promo-compose-to-bigger-size",t.COMPOSE_TO_SMALLER_SIZE="promo-compose-to-smaller-size",t.COMPOSE_BEAUTIFUL_EMAIL="promo-compose-beautiful-email",t.COMPOSE_NEW_AGAIN="promo-compose-new-again",t.COMPOSE_SUGGEST_BEAUTIFUL_EMAIL="promo-compose-suggest-beautiful-email"}});